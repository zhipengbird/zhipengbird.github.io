
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>Protocol的使用及相关事项 | 志鹏的技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="志鹏">
    

    
    <meta name="description" content="在iOS开发中，Protocol是一种经常用到的设计模式，苹果的系统框架中也普遍用到了这种方式，比如UITableView中的，以及、这样的协议。我想大家也都自定义过协议，一般都用于回调，或者数据传递. 接下来我们来了解下协议使用及相关事项。 什么是协议苹果官方给出如下的定义  A protocol declares a programmatic interface that any class">
<meta name="keywords" content="Protocol">
<meta property="og:type" content="article">
<meta property="og:title" content="Protocol的使用及相关事项">
<meta property="og:url" content="http://yuanph.org/2017/06/29/Protocol/index.html">
<meta property="og:site_name" content="志鹏的技术博客">
<meta property="og:description" content="在iOS开发中，Protocol是一种经常用到的设计模式，苹果的系统框架中也普遍用到了这种方式，比如UITableView中的，以及、这样的协议。我想大家也都自定义过协议，一般都用于回调，或者数据传递. 接下来我们来了解下协议使用及相关事项。 什么是协议苹果官方给出如下的定义  A protocol declares a programmatic interface that any class">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yuanph.org/2017/06/29/Protocol/protocol_2x.png">
<meta property="og:updated_time" content="2018-03-31T15:08:14.147Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Protocol的使用及相关事项">
<meta name="twitter:description" content="在iOS开发中，Protocol是一种经常用到的设计模式，苹果的系统框架中也普遍用到了这种方式，比如UITableView中的，以及、这样的协议。我想大家也都自定义过协议，一般都用于回调，或者数据传递. 接下来我们来了解下协议使用及相关事项。 什么是协议苹果官方给出如下的定义  A protocol declares a programmatic interface that any class">
<meta name="twitter:image" content="http://yuanph.org/2017/06/29/Protocol/protocol_2x.png">

    
    <link rel="alternative" href="atom.xml" title="志鹏的技术博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="../../../../css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="志鹏的技术博客">志鹏的技术博客</a></h1>
				<h2 class="blog-motto">记录成长的点滴</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">简介</a></li>
					
					<li>
 					
						<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" class="st-default-search-input" maxlength="20" placeholder="Search" />
						</form>
					
					</li>
				</ul>
			</nav>
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/06/29/Protocol/" title="Protocol的使用及相关事项" itemprop="url">Protocol的使用及相关事项</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="志鹏" target="_blank" itemprop="author">志鹏</a>
		
  <p class="article-time">
    <time datetime="2017-06-29T03:34:46.000Z" itemprop="datePublished"> Published 2017-06-29</time>
    <span id="busuanzi_container_page_pv">
    总阅读<span id="busuanzi_value_page_pv"></span>次
</span>
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#什么是协议"><span class="toc-number">1.</span> <span class="toc-text">什么是协议</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#协议的定义"><span class="toc-number">2.</span> <span class="toc-text">协议的定义</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#协议的关键字"><span class="toc-number">3.</span> <span class="toc-text">协议的关键字</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#遵守协议"><span class="toc-number">4.</span> <span class="toc-text">遵守协议</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#检测对象是否遵守协议"><span class="toc-number">5.</span> <span class="toc-text">检测对象是否遵守协议</span></a></li></ol>
		
		</div>
		
		<p>在iOS开发中，Protocol是一种经常用到的设计模式，苹果的系统框架中也普遍用到了这种方式，比如UITableView中的<uitableviewdelegate>，以及<nscopying>、<nsobject>这样的协议。我想大家也都自定义过协议，一般都用于回调，或者数据传递. 接下来我们来了解下协议使用及相关事项。</nsobject></nscopying></uitableviewdelegate></p>
<h1 id="什么是协议"><a href="#什么是协议" class="headerlink" title="什么是协议"></a>什么是协议</h1><p>苹果官方给出如下的定义</p>
<blockquote>
<p>A protocol declares a programmatic interface that any class may choose to implement. Protocols make it possible for two classes distantly related by inheritance to communicate with each other to accomplish a certain goal. They thus offer an alternative to subclassing. Any class that can provide behavior useful to other classes may declare a programmatic interface for vending that behavior anonymously. Any other class may choose to adopt the protocol and implement one or more of its methods, thereby making use of the behavior. The class that declares a protocol is expected to call the methods in the protocol if they are implemented by the protocol adopter.<br>   <img src="/2017/06/29/Protocol/protocol_2x.png" title="Protocol"></p>
</blockquote>
<ul>
<li>正式协议与非正式协议<blockquote>
<p>There are two varieties of protocol, formal and informal:</p>
<ul>
<li>A formal protocol declares a list of methods that client classes are expected to implement. Formal protocols have their own declaration, adoption, and type-checking syntax. You can designate methods whose implementation is required or optional with the @required and @optional keywords. Subclasses inherit formal protocols adopted by their ancestors. A formal protocol can also adopt other protocols.<br>Formal protocols are an extension to the Objective-C language.</li>
<li>An informal protocol is a category on NSObject, which implicitly makes almost all objects adopters of the protocol. (A category is a language feature that enables you to add methods to a class without subclassing it.) Implementation of the methods in an informal protocol is optional. Before invoking a method, the calling object checks to see whether the target object implements it. Until optional protocol methods were introduced in Objective-C 2.0, informal protocols were essential to the way Foundation and AppKit classes implemented delegation.</li>
</ul>
</blockquote>
</li>
</ul>
<h1 id="协议的定义"><a href="#协议的定义" class="headerlink" title="协议的定义"></a>协议的定义</h1><ol>
<li><p>协方式的定义</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">Protocolname</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"><span class="keyword">@required</span></span><br><span class="line"><span class="comment">//一系列必选方法</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line"><span class="comment">//一系列可选方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//属性的声明</span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>协议里可以定义哪些东西：</p>
<blockquote>
<p>Protocols can include declarations for both instance methods and class methods, as well as properties.</p>
</blockquote>
<p>协议可以定义实例方法，类方法以及属性  </p>
</li>
<li><p>协议的继承  </p>
<blockquote>
<p>In the same way that an Objective-C class can inherit from a superclass, you can also specify that one protocol conforms to another.<br>It’s best practice to define your protocols to conform to the <strong>NSObject</strong> protocol (some of the <strong>NSObject</strong> behavior is split from its class interface into a separate protocol; the <strong>NSObject</strong> class adopts the <strong>NSObject</strong> protocol)</p>
</blockquote>
<p> 协议默认继承 <strong><em>&lt; NSObject &gt;</em></strong> 协议 ,你也可以指定一个其他协议进行继承</p>
</li>
<li><p>协议中定义属性<br> 协议里是支持定义属性的，但这只是定义了getter和setter方法，并没有具体的实现。所以当协议属性修饰符为@required时，如果遵守协议的类不实现这两方法，编译器会报出警告。最简单的方式是加上属性同步语句@synthesize propertyName;</p>
</li>
</ol>
<h1 id="协议的关键字"><a href="#协议的关键字" class="headerlink" title="协议的关键字"></a>协议的关键字</h1><ol>
<li><p>@required</p>
<blockquote>
<p>By default, all methods declared in a protocol are required methods. This means that any class that conforms to the protocol must implement those methods.</p>
</blockquote>
<p> @required修改的协议方法为必要方法，任何遵守该协议的类都必须实现这些方法</p>
</li>
<li><p>@optional</p>
<blockquote>
<p>It’s also possible to specify optional methods in a protocol. These are methods that a class can implement only if it needs to. </p>
</blockquote>
<p> @optional修饰的方法为可选方法，这些方法可以根据类的需要进行实现。</p>
</li>
</ol>
<h1 id="遵守协议"><a href="#遵守协议" class="headerlink" title="遵守协议"></a>遵守协议</h1><ol>
<li><p>设置代理属性</p>
 <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Object</span> : <span class="title">NSObject</span>&lt;<span class="title">Protocolname</span>&gt;</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">weak</span>)<span class="keyword">id</span>&lt;Protocolname&gt;delegate;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>&lt;协议列表&gt;<br>  若需要遵守多个协议，将协议用逗号隔开，并放在尖括号&lt;&gt;中 </li>
<li>添加代理属性<br>  代理属性通常用<strong>weak</strong>修饰，避免强引用</li>
</ul>
</li>
<li>实现协议方法<ul>
<li>@required修饰的协议方法，需要在.m文件中对这些方法进行实现 </li>
<li>@optional修饰的协议方法，可根据需要在.m文件中进行实现    </li>
</ul>
</li>
</ol>
<h1 id="检测对象是否遵守协议"><a href="#检测对象是否遵守协议" class="headerlink" title="检测对象是否遵守协议"></a>检测对象是否遵守协议</h1><ol>
<li><p>检测某对象是否遵守该协议<br>使用 <code>- (BOOL)conformsToProtocol:(Protocol *)aProtocol;</code>进行检测</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[delegate conformsToProtocol:<span class="class"><span class="keyword">@protocol</span>(<span class="title">Protocolname</span>)];</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>检测对象是否实现了某方法<br>使用 <code>- (BOOL)respondsToSelector:(SEL)aSelector;</code>进行检测</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[delegate respondsToSelector:<span class="keyword">@selector</span>(methodname)];</span><br></pre></td></tr></table></figure>
</li>
</ol>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="../../../../categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Protocol/">Protocol</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yuanph.org/2017/06/29/Protocol/" data-title="Protocol的使用及相关事项 | 志鹏的技术博客" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2017/07/06/NSIndexSet/" title="NSIndexSet">
  <strong>上一篇：</strong><br/>
  <span>
  NSIndexSet</span>
</a>
</div>


<div class="next">
<a href="/2017/06/27/pip安装使用详解/"  title="pip安装使用详解">
 <strong>下一篇：</strong><br/> 
 <span>pip安装使用详解
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#什么是协议"><span class="toc-number">1.</span> <span class="toc-text">什么是协议</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#协议的定义"><span class="toc-number">2.</span> <span class="toc-text">协议的定义</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#协议的关键字"><span class="toc-number">3.</span> <span class="toc-text">协议的关键字</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#遵守协议"><span class="toc-number">4.</span> <span class="toc-text">遵守协议</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#检测对象是否遵守协议"><span class="toc-number">5.</span> <span class="toc-text">检测对象是否遵守协议</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/English/" title="English">English<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/GPUImage/" title="GPUImage">GPUImage<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Git/" title="Git">Git<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/TCP/" title="TCP">TCP<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/XML/" title="XML">XML<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Xcode8/" title="Xcode8">Xcode8<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/cocoapods/" title="cocoapods">cocoapods<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/git/" title="git">git<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>23</sup></a></li>
		  
		
		  
			<li><a href="/categories/python/" title="python">python<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/xcode-archive/" title="xcode_archive">xcode_archive<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/其他/" title="其他">其他<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/工具/" title="工具">工具<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/数学/" title="数学">数学<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/正则表达式/" title="正则表达式">正则表达式<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/测试/" title="测试">测试<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS/" title="iOS">iOS<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/English/" title="English">English<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/XML/" title="XML">XML<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Appache/" title="Appache">Appache<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/动画/" title="动画">动画<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/tips/" title="tips">tips<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/git/" title="git">git<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/UITextField/" title="UITextField">UITextField<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/配置文件/" title="配置文件">配置文件<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ARC/" title="ARC">ARC<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/AutoLayout/" title="AutoLayout">AutoLayout<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/内存问题/" title="内存问题">内存问题<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/CGRect/" title="CGRect">CGRect<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/日期格式/" title="日期格式">日期格式<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ushow/" title="ushow">ushow<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Location/" title="Location">Location<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/GCD/" title="GCD">GCD<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-GPUImage/" title="iOS-GPUImage">iOS-GPUImage<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/MD5/" title="MD5">MD5<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/NSString/" title="NSString">NSString<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://blog.scorplot.com/" target="_blank" title="蛟哥的博客">蛟哥的博客</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.bomobox.org/" target="_blank" title="贤凯的博客">贤凯的博客</a>
            
          </li>
        
          <li>
            
            	<a href="https://ushareit.github.io/" target="_blank" title="Ushareit">Ushareit</a>
            
          </li>
        
          <li>
            
            	<a href="https://janexzz.github.io" target="_blank" title="许珍珍">许珍珍</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m zhipengbird. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2019
		
		<a href="/about" target="_blank" title="志鹏">志鹏</a>
		
		</br>
		<span id="busuanzi_container_site_pv">
					&nbsp;&nbsp;Total visits:&nbsp;<span id="busuanzi_value_site_pv"></span>
		</span>
		<span id="busuanzi_container_site_uv">
				&nbsp;&nbsp;You are Visiter No.<span id="busuanzi_value_site_uv"></span>
		</span>
	
		
				
		
		</p>
		
		<script type="text/javascript">
(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','VPgYp3Umx_FneUdxKodz','2.0.0');
</script>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
</div>

</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'yuanpinghua';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
