<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="atom.xml" title="志鹏的技术博客" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="志鹏的技术博客">
<meta property="og:url" content="http://yuanph.org/index.html">
<meta property="og:site_name" content="志鹏的技术博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="志鹏的技术博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yuanph.org/"/>





  <title>志鹏的技术博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?hexo5154a045f583f13e4b93ee8041fa5efc";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">志鹏的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录成长的点滴</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/11/27/English-Level4-Unit2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/11/27/English-Level4-Unit2/" itemprop="url">English-Level4-Unit2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-27T09:23:52+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="看病"><a href="#看病" class="headerlink" title="看病"></a>看病</h1><h3 id="基本病症"><a href="#基本病症" class="headerlink" title="基本病症"></a>基本病症</h3><p>使用以下医疗词汇，搭配动词 have 描述生病症状。</p>
<p>I have a fever.    我发烧了。</p>
<p>He has diarrhea.    他拉肚子了。</p>
<p>She has a bad cough.    她咳嗽得很厉害。</p>
<p>使用 sore 一词表示身体某个部位疼痛。</p>
<p>I have a sore throat.    我嗓子疼。</p>
<p>使用后缀 -ache 表示身体某个部位疼痛。该后缀并不适用于所有身体部位，只适用于 head、stomach、back 和 tooth。</p>
<p>He has a headache.    他头痛。</p>
<p>I have a stomachache.    我胃痛。</p>
<p>使用以下医疗词汇，搭配动词 be 或 feel 使用。</p>
<p>I’m dizzy. I feel dizzy.    我头晕。我感觉头晕。</p>
<p>She’s nauseous. She feels nauseous.    她感觉恶心。她觉得恶心。</p>
<p>如果是呕吐，使用动词 to vomit。</p>
<p>I’ve been vomiting for about an hour.    我吐了一个小时左右。</p>
<p>###现在完成时进行时</p>
<p>用现在完成进行时谈论一种在过去开始一直延续到现在的病症或病。用 I have been + 动词 + -ing结构。</p>
<p>I have been vomiting a lot.    我一直在吐，吐了好多。</p>
<p>I have been having problems sleeping.    我一直都难以睡眠。</p>
<p>用for 增加有关时间的信息。</p>
<p>I have been feeling very bad for the last two days.    最近两天我一直都感觉不佳。</p>
<p>医生也可能使用现在完成进行时提问。</p>
<p>How long has this been going on?    这事持续多久了？</p>
<p>How long have you been feeling like this?    你这样的感觉多久了?</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/11/13/English-Level4-Unit1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/11/13/English-Level4-Unit1/" itemprop="url">English-Level4-Unit1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-13T09:10:36+08:00">
                2017-11-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="工作交流"><a href="#工作交流" class="headerlink" title="工作交流"></a>工作交流</h1><h2 id="给予反馈"><a href="#给予反馈" class="headerlink" title="给予反馈"></a>给予反馈</h2><h3 id="描述员工的形容词"><a href="#描述员工的形容词" class="headerlink" title="描述员工的形容词"></a>描述员工的形容词</h3><p>以下是一些可用于描述员工的形容词。把形容词和它的反义词一起识记，这种方法一直都很好。</p>
<p>clever - stupid    聪明的 - 愚蠢的</p>
<p>outgoing - shy    外向的 - 害羞的</p>
<p>注意，否定前缀 un- 常用于构成反义词。</p>
<p>reliable - unreliable    可靠的 - 不可靠的</p>
<p>ambitious - unambitious    有雄心壮志的 - 无抱负的</p>
<p>否定前缀 dis- 不如 un- 常见，但是也用于构成一些重要的反义词。</p>
<p>honest - dishonest    诚实的 - 不诚实的</p>
<p>organized - disorganized    有条理的 - 紊乱的</p>
<h3 id="‘Fast-’-‘hard’和’good’-用作形容词和副词"><a href="#‘Fast-’-‘hard’和’good’-用作形容词和副词" class="headerlink" title="‘Fast,’ ‘hard’和’good’ 用作形容词和副词"></a>‘Fast,’ ‘hard’和’good’ 用作形容词和副词</h3><p>很多形容词在词后加上-ly即可用作副词。<br>He’s clever.    他很聪明。</p>
<p>He managed the project cleverly.    他巧妙地管理项目。</p>
<p>Fast, hard和good都是例外。 用fast作形容词放在名词前面。</p>
<p>She’s a fast learner.    她是一个学东西很快的人。</p>
<p>用fast 作为副词放在动词之后。注意它没有-ly 后缀。</p>
<p>She learns fast.    她学东西很快。</p>
<p>用 hard 作形容词放在一个名词的前面。</p>
<p>Bill is a hard worker.    Bill 是一个工作努力的人。</p>
<p>用 hard 做副词放在动词后面。注意：它没有-ly 后缀。</p>
<p>Bill works hard.    Bill 工作努力。</p>
<p>用 good 作形容词放在名词前面。</p>
<p>He’s a good guy.    他是个不错的小伙子。</p>
<p>用well,不是good放在动词后作副词。</p>
<p>I work well with the team.    我与团队合作融洽。</p>
<p>语言点：guy 一词在非正式场合可用于指代男性。它也可在口语中指代一群男人或女人。</p>
<h3 id="用’for’-和-‘since’-表达持续"><a href="#用’for’-和-‘since’-表达持续" class="headerlink" title="用’for’ 和 ‘since’ 表达持续"></a>用’for’ 和 ‘since’ 表达持续</h3><ul>
<li>用for 谈论一段时间。</li>
</ul>
<p>Dave met with us for an hour.    Dave 与我们会晤了一小时。</p>
<p>Laura will work in Munich for three years.    Laura 将在慕尼黑工作三年。</p>
<ul>
<li>用since 谈论强调从过去某一个时间点起至今的一段时间</li>
</ul>
<p>Lindsey and Carol have worked here since Wednesday.    Lindsey 和 Carol 从星期三起就在这里上班了。</p>
<p>He’s been our customer since last year.    他从去年起就一直是我们的顾客。</p>
<p>注意： Since 通常与现在完成时使用。</p>
<h3 id="谈论员工表现"><a href="#谈论员工表现" class="headerlink" title="谈论员工表现"></a>谈论员工表现</h3><p>在评估员工表现时，经理可能找你了解一位同事或你的下属的信息。你可能会听到以下问题。</p>
<p>How long has she been on your team?    她在你的团队做多久了？</p>
<p>In general, how’s he doing?    总体而言，他表现怎么样？</p>
<p>Can you give me some details?    你能告诉我一些细节吗？</p>
<p>经理在了解一位员工的优缺点后，可能会马上询问你他怎样才可能改进。注意提问和回答中 could 一词的使用。</p>
<p>A: How could she improve?    她能够怎样改进？<br>B: Well, she’s sometimes late to work. She could take an earlier train in the morning.    嗯，她有时上班迟到。她早上可以坐早一点的列车。</p>
<p>A: What could he do better?    A：他怎样能做得更好？<br>B: Umm, he could pay more attention to deadlines.    B：嗯，他可以多注意截止期限。</p>
<p>使用表达 working on it 和 getting better，谈论正在进步的员工。</p>
<p>He’s often disorganized, but he’s working on it.    他做事常常缺乏条理，但正在努力改进。</p>
<p>She’s sometimes a bit shy in meetings, but she’s getting better.    她有时开会有点害羞，但正在慢慢改进。</p>
<h3 id="结束会议"><a href="#结束会议" class="headerlink" title="结束会议"></a>结束会议</h3><p>会议结尾常常分为几个步骤，每步都清楚明了。</p>
<p>1.最后提问。</p>
<p>Are there any further questions?    大家还有问题吗？</p>
<p>2.总结会议。</p>
<p>To summarize, sales look good.    总结来说，销售情况不错。</p>
<p>3.陈述会议决议。</p>
<p>Remember, there is one action item: Confirm your team sales.    记住，这有一条决议：确认你的团队销售额。</p>
<p>4.结束会议。</p>
<p>That’s it. Thanks. Have a great day.    就这样了。谢谢。祝大家今天愉快。</p>
<h4 id="‘Anyone’-和-‘anything’"><a href="#‘Anyone’-和-‘anything’" class="headerlink" title="‘Anyone’ 和 ‘anything’"></a>‘Anyone’ 和 ‘anything’</h4><p>当你谈论的东西的数目并不重要或不易识别时，在否定句和问句中用不定代词anyone 和anything 。</p>
<p>Don’t tell anyone about this.    不要跟任何人讲这件事。                            </p>
<p>Does anyone have questions?<br>还有人有问题吗？</p>
<p>I don’t have anything to report.<br>我没有什么要报告的。</p>
<p>Mike, do you want to say anything?    Mike，你有什么要说的吗？</p>
<h3 id="撰写会议总结"><a href="#撰写会议总结" class="headerlink" title="撰写会议总结"></a>撰写会议总结</h3><p>会后，你可能需要把总结发邮件告诉同事。这里有一份可供参照的样文。</p>
<ol>
<li>撰写简短准确的 subject line（主题行）。</li>
</ol>
<p>Royal project meeting summary    Royal 项目会议总结<br>Summary of Thursday’s budget meeting    周四预算会议总结</p>
<ol>
<li>简要说明你撰写这封邮件的 main reason（主要原因）。</li>
</ol>
<p>I’m writing to summarize our meeting about the Royal project.    我写信是要总结这次 Royal 项目的会议。</p>
<ol>
<li>列出所讨论的 main topics（主要话题），包括提出的问题和给出的答案。</li>
</ol>
<p>Randy asked who is working on the project.    Randy 问现在谁在做这个项目。<br>Jeremy said that Bill and Lucy are working on the project.<br>Jeremy 说 Bill 和 Lucy 正在做那个项目。</p>
<ol>
<li>列出会议达成的所有 action items（行动决议）。</li>
</ol>
<p>Jeremy said that he can confirm the budget by Monday.    Jeremy 说 他周一之前可以确认预算。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/10/18/English-Level3-Unit6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/10/18/English-Level3-Unit6/" itemprop="url">English-Level3-Unit6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-18T09:32:15+08:00">
                2017-10-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>‘Too many、’ ‘too much’ 和 ‘enough’</p>
<p>使用 too many 搭配可数名词，表示超出需要的数量。</p>
<p>She has 100 hats. That’s too many hats!    她有 100 顶帽子。这帽子也太多了！</p>
<p>There are too many baggy jeans in the stores now.    商场现在有太多的宽松牛仔裤。</p>
<p>That store has too many plastic sandals.    那家店有太多的塑料凉鞋。</p>
<p>使用 too much 搭配不可数名词，表示超出需要的数量。</p>
<p>She’s wearing too much makeup.    她妆化得太浓。</p>
<p>They’re wearing too much fur.    他们穿了太多的皮草。</p>
<p>使用 enough 搭配复数可数名词或不可数名词，表示一个充足的数量。</p>
<p>I have enough handbags. I don’t need any more.    我的手提袋够多了，不需要了。</p>
<p>We’ve done enough shopping. Let’s go home.    我们买得够多了。我们回家吧。</p>
<p>使用 not enough 搭配任意名词，表示你有的东西少于需要。</p>
<p>I don’t have enough money to buy that dress.    我钱不够，买不了那条裙子。</p>
<p>批评和回应批评</p>
<p>人们通常用带有 far too 和way too的表达批评别人，以强调反对。</p>
<p>That dress looks way too baggy.         那件裙子看起来太宽松了。</p>
<p>有时，他们会在说出批评的话之前先道个歉。</p>
<p>I’m sorry, but she’s wearing far too many necklaces.         不好意思，但是她戴的项链太多了。</p>
<p>批评和回应批评时通常会使用具有强烈贬义的形容词。</p>
<p>A: That’s a horrible look.<br>B: You’re crazy! I really like it.         那看起来真吓人。<br>你疯了！我真的很喜欢。</p>
<p>A: This plastic handbag is nasty.<br>B: Come on. Maybe you’re being too critical.         这款塑胶手袋不好看。<br>行了，或许你太挑剔了。</p>
<p>你可以告诉他人打扮很好，让他安心，以此回应他的自我批评。</p>
<p>A: I look terrible!         我看起来好糟糕！<br>B: You look fine. Not everybody cares as much about makeup as you do.         你看起来很好。不是每个人都像你一样那么在乎妆容的。</p>
<p>文化点：谨慎使用强烈的语言批评他人，因为可能显得无礼。</p>
<p>时尚形容词</p>
<p>有许多可用于形容 fashion 和 clothes 的形容词。使用它们描述你喜欢的衣服。</p>
<p>cool    酷的</p>
<p>stylish    时髦的</p>
<p>in style    时髦</p>
<p>fashionable    时髦的，流行的</p>
<p>使用下列形容词，描述你不喜欢的衣服。</p>
<p>out of style    过时的</p>
<p>dreadful    糟糕的</p>
<p>unfashionable    旧式的，不时髦的</p>
<p>学习新的形容词时，同时学习它的反义词是一种好的方法。以下是服装语境中的一些例子。</p>
<p>针对很长时间一直都非常时髦的某物，使用 classic。如果只是一时的时尚，则用 trendy。<br>classic - trendy    经典的 - 时髦的</p>
<p>形容衣服有多合身，使用形容词 loose 和 tight。注意，loose 与 baggy 意义相近。<br>loose - tight    宽松的 - 紧贴的</p>
<p>形容设计仿造某种材料或品牌、但实际上不是的衣服，使用形容词 fake。该词常用于修饰并非来自动物的 fur。如果一件衣服是正品，使用形容词 real。<br>fake - real                                      伪造的 - 非伪造的          </p>
<p>形容特殊场合穿着的衣服，比如婚礼或工作面试，使用 formal。使用形容词 casual 形容日常服装。注意，在该语境中，两个形容词 casual 和 informal 意思极为相近。<br>formal - casual                               正式的 - 休闲的          </p>
<p>寻求和表示赞美</p>
<p>用look +形容词来恭维某人的外貌。</p>
<p>You look fantastic!    你看起来很美！</p>
<p>That shirt looks great on you.    你穿那件衬衫很好看。</p>
<p>That color looks good with your hair.    那个颜色和你的发色很配。</p>
<p>您也可以用good at +动词 + -ing 来恭维他人。</p>
<p>You’re good at putting together an outfit.    你很擅长搭配衣服。</p>
<p>You’re great at creating new styles.    你很擅长创造新的风格。</p>
<p>赞美别人的另一种方式是夸张。</p>
<p>You’re just the sweetest man in the world!    你是世界上最可爱的男人！</p>
<p>You’re 35 years old? You look 29!    你 35 岁吗？你看起来像 29 岁！</p>
<p>要得到恭维，用like提问。</p>
<p>A: Do you like my outfit?<br>B: Absolutely. You know clothes better than anyone!    你喜欢我的衣服吗？<br>当然喜欢。你比任何人都懂衣服。</p>
<p>A: How do you like my hair?<br>B: It looks gorgeous!    你觉得我的头发怎么样？<br>看起来非常漂亮！</p>
<p>注意：频繁要人赞美你，可能会让人产生厌烦，或给人感觉自我。</p>
<p>形容词顺序</p>
<p>描述中使用形容词超过一个时，一般按照观点、大小、年龄、颜色、来源、材料的顺序依次排列。</p>
<p>Look at this fabulous, long, old, navy blue, Chinese, silk jacket.    看看这件极棒的海军蓝中式长款旧丝绸上衣。</p>
<p>观点    大小    年龄    颜色    来源    材料<br>fabulous    long    old    navy blue    Chinese    silk</p>
<p>注意这些例子中的形容词顺序：</p>
<p>Heidi’s carrying a stylish, beige, leather handbag.    海蒂拿着一只时尚的米黄色皮质手提包。</p>
<p>Your baseball cap is way too nasty, small and old.    你的棒球帽实在是太脏了，而且又小又旧。</p>
<p>How about your new, gray, Italian, wool suit?    你那新的灰色意大利羊毛西服怎么样？</p>
<p>I look for brands that use classic, Egyptian, cotton fabrics.    我在找采用埃及传统棉纺面料的品牌。</p>
<p>表达喜好</p>
<p>使用动词 prefer 表达喜好。</p>
<p>I prefer cotton to wool in the summer.    我夏天喜欢全棉而不是羊毛衣服。</p>
<p>你也可以使用 prefer，不用说明相比较不喜欢的东西。</p>
<p>I prefer cotton.    我喜欢全棉质地。</p>
<p>另一种表达喜好的方法是使用表达 would rather。注意，I would 常常缩写成 I’d。</p>
<p>I’d rather wear light colors in the summer.    我夏天更喜欢穿浅色。</p>
<p>你也可以将rather与than合用，表示与…相比而更喜欢…。</p>
<p>I’d rather wear wool clothes than cotton in the winter.    我冬天更喜欢穿羊毛衣服，而不是全棉的衣服。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/10/10/English-Level3-Unit5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/10/10/English-Level3-Unit5/" itemprop="url">English-Level3-Unit5</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-10T20:17:32+08:00">
                2017-10-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="带有’one-of-the’-和-‘some-of-the’-的表达"><a href="#带有’one-of-the’-和-‘some-of-the’-的表达" class="headerlink" title="带有’one of the’ 和 ‘some of the’ 的表达"></a>带有’one of the’ 和 ‘some of the’ 的表达</h3><p><strong><em>用one of the + 最高级 +复数名词表达某物是某一组的以一部分，是无法超越的。</em></strong></p>
<p>‘The Birds’ has one of the most exciting plots I’ve ever seen.    ‘The Birds’里有我从来没见过的最令人振奋的情节。</p>
<p><strong><em>用 some of the + 最高级 +复数名词来表达未被超过的一组中的两个或更多个东西。</em></strong></p>
<p>‘Avatar’ has some of the best special effects ever.    ‘Avatar’有一些前所未有最好的的特殊效果。</p>
<p><strong><em>您可以用诸如of all time 和 ever的表达来加重强调.</em></strong></p>
<p>Amelie is one of the greatest characters of all time.    Amelie是有史以来最伟大的人物之一。</p>
<p>‘The Terminator’ is one of the coolest movies ever.    ‘The Terminator’ 是有史以来最酷的电影之一。</p>
<h2 id="询问电影的情况"><a href="#询问电影的情况" class="headerlink" title="询问电影的情况"></a>询问电影的情况</h2><p>以下是一些你可以询问影片的常见问题。<strong><em>注意，movie 和 film 所指相同，但 film 更正式一点。</em></strong></p>
<p>A: What did you think of the film?    你觉得这部影片怎么样？<br>B: I loved it!    我非常喜欢！</p>
<p>A: How did you like it?    你喜欢它吗？<br>B: I didn’t like it at all!    我一点也不喜欢。</p>
<p>A: How would you describe it?    你要怎么形容它？<br>B: It’s a romantic comedy.    这是一部浪漫喜剧。</p>
<p>A: What’s your favorite movie?    你最喜欢哪部电影？<br>B: My favorite movie is ‘Chinatown.’    我最喜欢的电影是 ‘Chinatown。’</p>
<p><strong><em>你可以使用短语 all-time favorite，谈论你最爱的电影。</em></strong></p>
<p>My all-time favorite movie is ‘Casablanca.’    我最喜爱的电影是 ‘Casablanca。’</p>
<h2 id="使用以下问题，询问电影的细节。"><a href="#使用以下问题，询问电影的细节。" class="headerlink" title="使用以下问题，询问电影的细节。"></a>使用以下问题，询问电影的细节。</h2><p>A: What’s it about?    它是关于什么的？<br>B: It’s about a boy and his dog.    它是关于一个男孩和他的狗的故事。</p>
<p>A: Who directed it?    谁导演的？<br>B: It was directed by Woody Allen.    由 Woody Allen 导演的。</p>
<p>A: Who’s in it?    里面有谁？<br>B: It stars Glenda Smith.    主演是 Glenda Smith。</p>
<p>A: How’s the acting?    演技怎么样？<br>B: It’s really good.    演技非常不错。</p>
<p>A: Where does the film take place?    电影在哪发生？<br>B: It takes place in Paris in 1952.    发生在 1952 年的巴黎。</p>
<p>A: How does it end?    电影是怎么样结尾的？<br>B: Sheila and Mark get married.    Sheila 和 Mark 结婚了。</p>
<h2 id="现在时被动语态"><a href="#现在时被动语态" class="headerlink" title="现在时被动语态"></a>现在时被动语态</h2><ul>
<li><p>一种常见的句型是主语 +动词+宾语。</p>
<p>   主语    动词    宾语                                  </p>
</li>
</ul>
<p>Ai Jones    directed    this fantastic film.</p>
<ul>
<li><p>但是，如果宾语比主语重要，也可置于主语之前。这称为被动语态。</p>
<p>   主语    be + 过去分词    by-短语</p>
</li>
</ul>
<p>This fantastic film    is directed     by Ai Jones.</p>
<ul>
<li>注意以下现在时被动语态例子的结构：</li>
</ul>
<p>The movie is directed by George Lucas.    电影由 George Lucas 导演。</p>
<p>The costumes are designed by Virginia Poole.    服装由 Virginia Poole 设计。</p>
<p>The main character is played by Bruce Willis.    主角由 Bruce Willis 扮演。</p>
<ul>
<li>如果动作的施动者非常明显，则不需要 by-短语。例如在下句中，我们无需提到是一位译者翻译了字幕。</li>
</ul>
<p>The subtitles are translated into five languages.    字幕被翻译成五种语言。</p>
<h2 id="过去时被动语态"><a href="#过去时被动语态" class="headerlink" title="过去时被动语态"></a>过去时被动语态</h2><p>如果您要把焦点放在一个过去的动作，而不是完成该动作的人，用过去被动式。结构与现在被动式相同，除了助动词be 用过去式而不是现在式。</p>
<p>The special effects were created by 23 people.    特效由 23 个人制作。</p>
<p>The bank manager was shot by the bad guys.    银行经理被坏人开枪击中了。</p>
<p>如果完成了事情的人不重要或未知，by +人从句可以省略。</p>
<p>A: Guess what? The producer was fired.<br>B: Why?<br>A: The actors weren’t paid.<br>B: Oh, no! Was a new producer hired?<br>猜猜怎么着？制片人被解雇了。<br>为什么？<br>演员没收到钱。<br>不是吧！新制片人请好了吗？</p>
<h2 id="推断"><a href="#推断" class="headerlink" title="推断"></a>推断</h2><p>文本中，事实和观点往往并不直接说明。在这种情况下，你必须做出推断。推断是一种猜测。</p>
<p>Gene Kelly did a great job in the movie ‘Singin’ in the Rain’! He’s an excellent dancer.    Gene Kelly 在影片 ‘Singin’ in the Rain’ 中表现非常出色！他舞跳得很好。</p>
<p>作者并没有直接说 Gene Kelly 在影片 ‘Singin’ in the Rain’ 有跳舞，但因为两个关于电影和 Gene Kelly 的句子前后相邻，我们可以推断他在电影中跳过舞。</p>
<p>‘The Class’ is a great movie. It was made in France.     ‘The Class’ 是一部优秀的影片。影片在法国制作。</p>
<p>作者并没有直接说影片 ‘The Class’ 中讲哪种语言，但由于影片在法国制作，我们可以推断它是法语影片。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/09/03/swordOffer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/09/03/swordOffer/" itemprop="url">swordOffer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-03T17:26:49+08:00">
                2017-09-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="代码的完整性"><a href="#代码的完整性" class="headerlink" title="代码的完整性"></a>代码的完整性</h1><h2 id="从3方面确保代码的完整性"><a href="#从3方面确保代码的完整性" class="headerlink" title="从3方面确保代码的完整性"></a>从3方面确保代码的完整性</h2><ol>
<li>功能测试</li>
<li>边界测试</li>
<li>负面测试<br>从这3 方面设计测试用例，以保证代码的完整性。<h2 id="3种错误处理的方法"><a href="#3种错误处理的方法" class="headerlink" title="3种错误处理的方法"></a>3种错误处理的方法</h2></li>
<li>用函数返回值来告诉调用都是否出错。</li>
<li>当错误发生时设置一个全局变量</li>
<li>抛出异常<img src="/2017/09/03/swordOffer/threemethodForException.jpg" title="三种异常的对比"> 
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/07/21/HookArrayBinder/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/07/21/HookArrayBinder/" itemprop="url">将容器列表视图从控制器分离，做到数据驱动UI</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-21T11:49:12+08:00">
                2017-07-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/07/20/git使用小技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/07/20/git使用小技巧/" itemprop="url">git 命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-20T13:23:52+08:00">
                2017-07-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>移除本地仓库的远程git<br>使用 <code>git remote rm</code>命令解除本地创建与远程git的绑定关系<br><code>git remote rm</code>命令需要传入一个参数 <code>远程仓库名</code><br>示例：<figure class="highlight ruby"><figcaption><span>查看当前的远程仓库</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$git remote -v </span><br><span class="line">origin	git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:yuanph/HookArray</span>.git (fetch)</span><br><span class="line">origin	git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:yuanph/HookArray</span>.git (push)</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>移除远程git</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote rm origin</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>添加新远程仓库</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$git remote add origin git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:shareCode/HookArray</span>.git</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>查看当前的远程仓库</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$git remote -v </span><br><span class="line">origin	git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:shareCode/HookArray</span>.git (fetch)</span><br><span class="line">origin	git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:shareCode/HookArray</span>.git (push)</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/07/12/NSPredicate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/07/12/NSPredicate/" itemprop="url">NSPredicate</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-12T11:35:48+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="NSPredicate是什么？"><a href="#NSPredicate是什么？" class="headerlink" title="NSPredicate是什么？"></a>NSPredicate是什么？</h1><p>NSPredicate是一个Foundation类，它指定数据被获取或者过滤的方式。它的查询语言就像SQL的WHERE和正则表达式的交叉一样，提供了具有表现力的，自然语言界面来定义一个集合被搜寻的逻辑条件</p>
<h1 id="集合中使用NSPredicate"><a href="#集合中使用NSPredicate" class="headerlink" title="集合中使用NSPredicate"></a>集合中使用NSPredicate</h1><p>Foundation提供使用谓词（predicate）来过滤NSArray／NSMutableArray&amp;NSSet／NSMutableSet的方法。</p>
<p>不可变的集合，NSArray&amp;NSSet，有可以通过评估接收到的predicate来返回一个不可变集合的方法filteredArrayUsingPredicate:和filteredSetUsingPredicate:。</p>
<p>可变集合，NSMutableArray&amp;NSMutableSet，可以使用方法filterUsingPredicate:，它可以通过运行接收到的谓词来移除评估结果为FALSE的对象。</p>
<p>NSDictionary可以用谓词来过滤它的键和值（两者都为NSArray对象）。NSOrderedSet可以由过滤的NSArray或NSSet生成一个新的有序的集，或者NSMutableSet可以简单的removeObjectsInArray:，来传递通过_否定_predicate过滤的对象。</p>
<h1 id="Core-Data中使用NSPredicate"><a href="#Core-Data中使用NSPredicate" class="headerlink" title="Core Data中使用NSPredicate"></a>Core Data中使用NSPredicate</h1><p>NSFetchRequest有一个predicate属性，它可以指定管理对象应该被获取的逻辑条件。谓词的使用规则在这里同样适用，唯一的区别在于，在管理对象环境中，谓词由持久化存储助理（persistent store coordinator）评估，而不像集合那样在内存中被过滤</p>
<figure class="highlight objc"><figcaption><span>data</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> *firstName;</span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> *lastName;</span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSNumber</span> *age;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Person</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)description &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@ %@"</span>, <span class="keyword">self</span>.firstName, <span class="keyword">self</span>.lastName];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span> *firstNames = @[ <span class="string">@"Alice"</span>, <span class="string">@"Bob"</span>, <span class="string">@"Charlie"</span>, <span class="string">@"Quentin"</span> ];</span><br><span class="line"><span class="built_in">NSArray</span> *lastNames = @[ <span class="string">@"Smith"</span>, <span class="string">@"Jones"</span>, <span class="string">@"Smith"</span>, <span class="string">@"Alberts"</span> ];</span><br><span class="line"><span class="built_in">NSArray</span> *ages = @[ @<span class="number">24</span>, @<span class="number">27</span>, @<span class="number">33</span>, @<span class="number">31</span> ];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableArray</span> *people = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">[firstNames enumerateObjectsUsingBlock:^(<span class="keyword">id</span> obj, <span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">    Person *person = [[Person alloc] init];</span><br><span class="line">    person.firstName = firstNames[idx];</span><br><span class="line">    person.lastName = lastNames[idx];</span><br><span class="line">    person.age = ages[idx];</span><br><span class="line">    [people addObject:person];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSPredicate</span> *bobPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"firstName = 'Bob'"</span>];</span><br><span class="line"><span class="built_in">NSPredicate</span> *smithPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"lastName = %@"</span>, <span class="string">@"Smith"</span>];</span><br><span class="line"><span class="built_in">NSPredicate</span> *thirtiesPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"age &gt;= 30"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Bob Jones"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Bobs: %@"</span>, [people filteredArrayUsingPredicate:bobPredicate]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Alice Smith", "Charlie Smith"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Smiths: %@"</span>, [people filteredArrayUsingPredicate:smithPredicate]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Charlie Smith", "Quentin Alberts"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"30's: %@"</span>, [people filteredArrayUsingPredicate:thirtiesPredicate]);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="谓词语法"><a href="#谓词语法" class="headerlink" title="谓词语法"></a>谓词语法</h1><h2 id="替换（占位符）"><a href="#替换（占位符）" class="headerlink" title="替换（占位符）"></a>替换（占位符）</h2><ul>
<li>%@是对值为字符串，数字或者日期的对象的替换值。(变量值)</li>
<li><p>%K是key path的替换值。（变量名）</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSPredicate</span> *ageIs33Predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"%K = %@"</span>, <span class="string">@"age"</span>, @<span class="number">33</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Charlie Smith"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Age 33: %@"</span>, [people filteredArrayUsingPredicate:ageIs33Predicate]);</span><br></pre></td></tr></table></figure>
</li>
<li><p>$VARIABLE_NAME是可以被NSPredicate -predicateWithSubstitutionVariables:替换的值。</p>
<figure class="highlight objc"><figcaption><span>变量</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSPredicate</span> *namesBeginningWithLetterPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"(firstName BEGINSWITH[cd] $letter) OR (lastName BEGINSWITH[cd] $letter)"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Alice Smith", "Quentin Alberts"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"'A' Names: %@"</span>, [people filteredArrayUsingPredicate:[namesBeginningWithLetterPredicate predicateWithSubstitutionVariables:@&#123;<span class="string">@"letter"</span>: <span class="string">@"A"</span>&#125;]]);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="基本比较"><a href="#基本比较" class="headerlink" title="基本比较"></a>基本比较</h2><ul>
<li>=, ==：左边的表达式和右边的表达式相等。</li>
<li>‘&gt;=’, =&gt;：左边的表达式大于或者等于右边的表达式。</li>
<li>&lt;=, =&lt;：左边的表达式小于等于右边的表达式。</li>
<li>‘&gt;’：左边的表达式大于右边的表达式。</li>
<li>&lt;：左边的表达式小于右边的表达式。</li>
<li>!=, &lt;&gt;：左边的表达式不等于右边的表达式。</li>
<li>BETWEEN：左边的表达式等于右边的表达式的值或者介于它们之间。右边是一个有两个指定上限和下限的数值的数列（指定顺序的数列）。比如，1 BETWEEN { 0 , 33 }，或者$INPUT BETWEEN { $LOWER, $UPPER }。</li>
</ul>
<h2 id="基本复合谓词"><a href="#基本复合谓词" class="headerlink" title="基本复合谓词"></a>基本复合谓词</h2><ul>
<li>AND, &amp;&amp;：逻辑与.</li>
<li>OR, ||：逻辑或.</li>
<li>NOT, !：逻辑非.</li>
</ul>
<h2 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h2><p>字符串比较在默认的情况下是<strong>区分大小写和音调</strong>的。你可以在方括号中用关键字符c和d来修改操作符以相应的指定不区分大小写和变音符号，比如firstname BEGINSWITH[cd] $FIRST_NAME。</p>
<ul>
<li>BEGINSWITH：左边的表达式以右边的表达式作为开始。</li>
<li>CONTAINS：左边的表达式包含右边的表达式。</li>
<li>ENDSWITH：左边的表达式以右边的表达式作为结束。</li>
<li>LIKE：左边的表达式等于右边的表达式：?和<em>可作为通配符，其中?匹配1个字符，</em>匹配0个或者多个字符。</li>
<li>MATCHES：左边的表达式根据ICU v3（更多内容请查看ICU User Guide for Regular Expressions）的regex风格比较，等于右边的表达式</li>
</ul>
<h2 id="关系操作"><a href="#关系操作" class="headerlink" title="关系操作"></a>关系操作</h2><ul>
<li>ANY，SOME：指定下列表达式中的任意元素。比如，ANY children.age &lt; 18。</li>
<li>ALL：指定下列表达式中的所有元素。比如，ALL children.age &lt; 18。</li>
<li>NONE：指定下列表达式中没有的元素。比如，NONE children.age &lt; 18。它在逻辑上等于NOT (ANY …)。</li>
<li>IN：等于SQL的IN操作，左边的表达必须出现在右边指定的集合中。比如，name IN { ‘Ben’, ‘Melissa’, ‘Nick’ }。</li>
</ul>
<h2 id="数组操作"><a href="#数组操作" class="headerlink" title="数组操作"></a>数组操作</h2><ul>
<li>array[index]：指定数组中特定索引处的元素。</li>
<li>array[FIRST]：指定数组中的第一个元素。</li>
<li>array[LAST]：指定数组中的最后一个元素。</li>
<li>array[SIZE]：指定数组的大小。</li>
</ul>
<h2 id="布尔值谓词"><a href="#布尔值谓词" class="headerlink" title="布尔值谓词"></a>布尔值谓词</h2><ul>
<li>TRUEPREDICATE：结果始终为真的谓词。</li>
<li>FALSEPREDICATE：结果始终为假的谓词。</li>
</ul>
<h2 id="直接量"><a href="#直接量" class="headerlink" title="直接量"></a>直接量</h2><p>在谓词表达式中可以使用如下直接量</p>
<ul>
<li>FALSE、NO：代表逻辑假</li>
<li>TRUE、YES：代表逻辑真</li>
<li>NULL、NIL：代表空值</li>
<li>SELF：代表正在被判断的对象自身</li>
<li>“string”或’string’：代表字符串</li>
<li>数组：和c中的写法相同，如：{‘one’, ‘two’, ‘three’}。</li>
<li>数值：包括证书、小数和科学计数法表示的形式</li>
<li>十六进制数：0x开头的数字</li>
<li>八进制：0o开头的数字</li>
<li>二进制：0b开头的数字</li>
</ul>
<h2 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h2><blockquote>
<p>下列单词都是保留字（不论大小写）</p>
<p>AND、OR、IN、NOT、ALL、ANY、SOME、NONE、LIKE、CASEINSENSITIVE、CI、MATCHES、CONTAINS、BEGINSWITH、ENDSWITH、BETWEEN、NULL、NIL、SELF、TRUE、YES、FALSE、NO、FIRST、LAST、SIZE、ANYKEY、SUBQUERY、CAST、TRUEPREDICATE、FALSEPREDICATE</p>
<p>注：虽然大小写都可以，但是更推荐使用大写来表示这些保留字</p>
</blockquote>
<h1 id="NSCompoundPredicate"><a href="#NSCompoundPredicate" class="headerlink" title="NSCompoundPredicate"></a>NSCompoundPredicate</h1><p>我们见过与&amp;或被用在谓词格式字符串中以创建复合谓词。然而，我们也可以用NSCompoundPredicate来完成同样的工作</p>
<figure class="highlight objc"><figcaption><span>下列谓词是相等的</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">NSCompoundPredicate</span> andPredicateWithSubpredicates:@[[<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"age &gt; 25"</span>], [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"firstName = %@"</span>, <span class="string">@"Quentin"</span>]]];</span><br><span class="line"></span><br><span class="line">[<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"(age &gt; 25) AND (firstName = %@)"</span>, <span class="string">@"Quentin"</span>];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/07/11/断言/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/07/11/断言/" itemprop="url">断言</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-11T16:20:56+08:00">
                2017-07-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>断言的定义：</p>
<blockquote>
<p>断言（assertion）是指在开发期间使用的、让程序在运行时进行自检的代码（通常是一个子程序或宏）。断言为真，则表明程序运行正常，而断言为假，则意味着它已经在代码中发现了意料之外的错误。断言对于大型的复杂程序或可靠性要求极高的程序来说尤其有用</p>
</blockquote>
<p>断言使用的准则与建议：<br><blockquote><ol>
<li>用错误处理代码来处理预期会发生的状况，用断言来处理绝不应该发生的状况。</li>
<li>避免把需要执行的代码放到断言中</li>
<li>用断言来注解并验证前条件和后条件</li>
<li>对于高健壮性的代码，应该先使用断言再处理错误</li>
</ol>
<footer><strong>《代码大全2》</strong><cite>-防御式编程</cite></footer></blockquote></p>
<h1 id="NSAssert"><a href="#NSAssert" class="headerlink" title="NSAssert()"></a>NSAssert()</h1><p>NSAssert()是一个宏，用于开发阶段调试程序中的Bug，通过为NSAssert()传递条件表达式来断定是否属于Bug，满足条件返回真值，程序继续运行，如果返回假值，则抛出异常，并且可以自定义异常描述。<br><figure class="highlight objc"><figcaption><span>断言的定义</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#define NSAssert(condition, desc)</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<ul>
<li>condition是条件表达式，值为YES或NO；</li>
<li>desc为异常描述，通常为NSString。</li>
<li>当conditon为YES时程序继续运行，为NO时，则抛出带有desc描述的异常信息。NSAssert()可以出现在程序的任何一个位置。</li>
</ul>
</blockquote>
<h1 id="NSAssert和assert-区别"><a href="#NSAssert和assert-区别" class="headerlink" title="NSAssert和assert 区别"></a>NSAssert和assert 区别</h1><p>NSAssert和assert都是断言,主要的差别是assert在断言失败的时候只是简单的终止程序,而NSAssert会报告出错误信息并且打印出来.所以只使用NSAssert就好,可以不去使用assert。</p>
<h1 id="断言何时运行？"><a href="#断言何时运行？" class="headerlink" title="断言何时运行？"></a>断言何时运行？</h1><p>通常在debug情况下（真机中会自动忽略），所有NSAssert都会被执行。在release下系统会自动将断言设置为禁用。如果release下断言仍可执行的话，则需要我们手动设置为，设置方式如下：Preprocessor Macros 的Release值为 NS_BLOCK_ASSERTIONS。</p>
<p>小延伸：如何切换Debug和Release呢？</p>
<p>自答吧：<br>1、点击工程名，点这里。选择Edit Scheme<br>2、选择Run，在Info 中将Build Configuration 修改为release</p>
<h1 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE"></a>NOTE</h1><ol>
<li>使用NSAssert的时候，每个NSAssert只检验一个条件，因为同事检验多个条件时，如果断言失败，无法直观地判断是那个条件失败</li>
<li><p>Block中使用NSAssert要特别注意循环引用。<br> 有没有搞错，用断言也会出现循环引用,不信，那我们看看宏定义展开后是啥样的？：</p>
 <figure class="highlight objc"><figcaption><span>断言的宏定义</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">#define NSAssert(condition, desc, ...)	\</span></span><br><span class="line">   <span class="keyword">do</span> &#123;				\</span><br><span class="line">__PRAGMA_PUSH_NO_EXTRA_ARG_WARNINGS \</span><br><span class="line"><span class="keyword">if</span> (!(condition)) &#123;		\</span><br><span class="line">           <span class="built_in">NSString</span> *__assert_file__ = [<span class="built_in">NSString</span> stringWithUTF8String:__FILE__]; \</span><br><span class="line">           __assert_file__ = __assert_file__ ? __assert_file__ : <span class="string">@"&lt;Unknown File&gt;"</span>; \</span><br><span class="line">    [[<span class="built_in">NSAssertionHandler</span> currentHandler] handleFailureInMethod:_cmd \</span><br><span class="line">	object:<span class="keyword">self</span> file:__assert_file__ \</span><br><span class="line">    	lineNumber:__LINE__ description:(desc), <span class="meta">##__VA_ARGS__]; \</span></span><br><span class="line">&#125;				\</span><br><span class="line">       __PRAGMA_POP_NO_EXTRA_ARG_WARNINGS \</span><br><span class="line">   &#125; <span class="keyword">while</span>(<span class="number">0</span>)</span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<p> 看到没，宏定义展开后会出现对self的持有，容易导致循环引用！！！。有没有解决方法，必须呀，使用  <code>NSCAssert</code>！，你确信吗？不信，展开看看：</p>
 <figure class="highlight objc"><figcaption><span>NSCAssert</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">#define NSCAssert(condition, desc, ...) \</span></span><br><span class="line">   <span class="keyword">do</span> &#123;				\</span><br><span class="line">__PRAGMA_PUSH_NO_EXTRA_ARG_WARNINGS \</span><br><span class="line"><span class="keyword">if</span> (!(condition)) &#123;		\</span><br><span class="line">           <span class="built_in">NSString</span> *__assert_fn__ = [<span class="built_in">NSString</span> stringWithUTF8String:__PRETTY_FUNCTION__]; \</span><br><span class="line">           __assert_fn__ = __assert_fn__ ? __assert_fn__ : <span class="string">@"&lt;Unknown Function&gt;"</span>; \</span><br><span class="line">           <span class="built_in">NSString</span> *__assert_file__ = [<span class="built_in">NSString</span> stringWithUTF8String:__FILE__]; \</span><br><span class="line">           __assert_file__ = __assert_file__ ? __assert_file__ : <span class="string">@"&lt;Unknown File&gt;"</span>; \</span><br><span class="line">    [[<span class="built_in">NSAssertionHandler</span> currentHandler] handleFailureInFunction:__assert_fn__ \</span><br><span class="line">	file:__assert_file__ \</span><br><span class="line">    	lineNumber:__LINE__ description:(desc), <span class="meta">##__VA_ARGS__]; \</span></span><br><span class="line">&#125;				\</span><br><span class="line">       __PRAGMA_POP_NO_EXTRA_ARG_WARNINGS \</span><br><span class="line">   &#125; <span class="keyword">while</span>(<span class="number">0</span>)</span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<p> 宏定义中并没有出现self，所以在block中使用NSCAssert可以避免循环引用的发生。</p>
</li>
<li><p>频繁地调用会极大的影响程序的性能，增加额外开销。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org2017/07/10/NSMutableArray/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="2017/07/10/NSMutableArray/" itemprop="url">监听NSMutableArray的变化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-10T10:19:00+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>平时工作中我们接触最多的容器，可能就数字典与数组了。有时我们在使用这些容器时有这样一个困惑，容器中的数据改变了，我们却无法立即知道。近日小编因为这个感到有些小苦恼，思来想去发现还是有途径可以做到监听容器的变化。<br>接下来我将会用文字将我的想法叙述出来，供大家参考。<br>要想监听一个容器的变化，首先我们需要对这个容器的属性及方法有着深入的了解。要监听容器的元素改变，那肯定是针对于可变容器。我们先着手于可变数组的监听工作。<br>接下来的工作将分成三部分：</p>
<ol>
<li>可变数组容器的分析</li>
<li>设计一套监听回调机制</li>
<li>使用runtime机制替换或者交换对应的函数指针IMP</li>
</ol>
<p>现在我们开始着手分析可变数组的方法。</p>
<h1 id="可变数组的分析"><a href="#可变数组的分析" class="headerlink" title="可变数组的分析"></a>可变数组的分析</h1><h2 id="可变数组的定义"><a href="#可变数组的定义" class="headerlink" title="可变数组的定义"></a>可变数组的定义</h2><p><strong>NSMutableArray</strong>定义了一套接口用于管理可变数组对象，该类的添加／插入／删除基础操作继承于不可变数组<strong>NSArray</strong></p>
<h2 id="可变数组的方法分类"><a href="#可变数组的方法分类" class="headerlink" title="可变数组的方法分类"></a>可变数组的方法分类</h2><p>通过查阅苹果的官方文档，我们大致可以将可变数组的方法分为以下几部分：</p>
<ol>
<li>创建和初始化一个可变数组</li>
<li>数组元素的添加操作</li>
<li>数组元素的删除操作</li>
<li>数组元素的替换操作</li>
<li>数组内容的筛选操作</li>
<li>数组内容的排序操作</li>
</ol>
<p>下面我将各部分的相关函数贴出，以便大家更好的直观了解。</p>
<h3 id="创建和初始化一个可变数组"><a href="#创建和初始化一个可变数组" class="headerlink" title="创建和初始化一个可变数组"></a>创建和初始化一个可变数组</h3><figure class="highlight objc"><figcaption><span>类方法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ arrayWithCapacity:</span><br><span class="line">+ arrayWithContentsOfFile:</span><br><span class="line">+ arrayWithContentsOfURL:</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>实例方法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- init</span><br><span class="line">- initWithCapacity:</span><br><span class="line">- initWithContentsOfFile:</span><br><span class="line">- initWithContentsOfURL:</span><br></pre></td></tr></table></figure>
<h3 id="数组元素的添加操作"><a href="#数组元素的添加操作" class="headerlink" title="数组元素的添加操作"></a>数组元素的添加操作</h3><figure class="highlight objc"><figcaption><span>元素的添加</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- addObject:</span><br><span class="line">- addObjectsFromArray:</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>元素的插入</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- insertObject:atIndex:</span><br><span class="line">- insertObjects:atIndexes:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps:批量元素的插入会调用多次单个元素的插入方法，<strong><em>在以后的监听过程中需要做些特殊的处理</em></strong><br><figure class="highlight objc"><figcaption><span>批量元素的插入</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">void</span> insertObjects:(<span class="built_in">NSArray</span> *)additions atIndexes:(<span class="built_in">NSIndexSet</span> *)indexes</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSUInteger</span> currentIndex = [indexes firstIndex];</span><br><span class="line">    <span class="built_in">NSUInteger</span> i, count = [indexes count];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        [<span class="keyword">self</span> insertObject:[additions objectAtIndex:i] atIndex:currentIndex];</span><br><span class="line">        currentIndex = [indexes indexGreaterThanIndex:currentIndex];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="数组元素的删除操作"><a href="#数组元素的删除操作" class="headerlink" title="数组元素的删除操作"></a>数组元素的删除操作</h3><figure class="highlight objc"><figcaption><span>删除单个元素</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除元素的删除</span></span><br><span class="line">- removeLastObject</span><br><span class="line">- removeObjectAtIndex:</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>批量删除</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 批量元素的删除</span></span><br><span class="line">- removeAllObjects</span><br><span class="line">- removeObject:</span><br><span class="line">- removeObject:inRange:</span><br><span class="line">- removeObjectsAtIndexes:</span><br><span class="line">- removeObjectIdenticalTo:</span><br><span class="line">- removeObjectIdenticalTo:inRange:</span><br><span class="line">- removeObjectsInArray:</span><br><span class="line">- removeObjectsInRange:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps： 以下方法会多次调用<code>- removeObjectAtIndex:</code>方法：,在监听过程中需要处理多次调用问题。<br><figure class="highlight objc"><figcaption><span>多次调用- removeObjectAtIndex:</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- removeObject:</span><br><span class="line">- removeObject:inRange:</span><br><span class="line">- removeObjectIdenticalTo:</span><br><span class="line">- removeObjectIdenticalTo:inRange:</span><br><span class="line">- removeObjectsInArray:</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="数组元素的替换操作"><a href="#数组元素的替换操作" class="headerlink" title="数组元素的替换操作"></a>数组元素的替换操作</h3><figure class="highlight objc"><figcaption><span>单个元素的替换</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- replaceObjectAtIndex:withObject:</span><br><span class="line">- setObject:atIndexedSubscript:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps：<code>- setObject:atIndexedSubscript:</code>这个方法我们最好不要直接使用而是使用语法糖的形式调用。<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mutableArray[<span class="number">3</span>] = <span class="string">@"someValue"</span>; </span><br><span class="line"><span class="comment">// equivalent to </span></span><br><span class="line">[mutableArray replaceObjectAtIndex:<span class="number">3</span> withObject:<span class="string">@"someValue"</span>];</span><br></pre></td></tr></table></figure></p>
<p>若替换对象为空会抛出<code>NSInvalidArgumentException</code>异常，若索引下标越界会抛出<code>NSRangeException</code>异常</p>
</blockquote>
<figure class="highlight objc"><figcaption><span>批量元素的替换</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- replaceObjectsAtIndexes:withObjects:</span><br><span class="line">- replaceObjectsInRange:withObjectsFromArray:range:</span><br><span class="line">- replaceObjectsInRange:withObjectsFromArray:</span><br><span class="line">- setArray:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps: 以下方法会调用多次<code>- replaceObjectAtIndex:withObject:</code>方法<br><figure class="highlight objc"><figcaption><span>多次调用- replaceObjectAtIndex:withObject:</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- replaceObjectsAtIndexes:withObjects:</span><br><span class="line"><span class="comment">//PS: objects的个数必须与indexes的个数相同，否则会抛出异常</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="数组元素的筛选"><a href="#数组元素的筛选" class="headerlink" title="数组元素的筛选"></a>数组元素的筛选</h3><figure class="highlight objc"><figcaption><span>筛选</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- filterUsingPredicate:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps： 会在数组中直接筛选出符合条件的数组元素，不符合的会直接删除</p>
</blockquote>
<h3 id="数组元素的排序"><a href="#数组元素的排序" class="headerlink" title="数组元素的排序"></a>数组元素的排序</h3><figure class="highlight objc"><figcaption><span>下标元素的交换</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- exchangeObjectAtIndex:withObjectAtIndex:</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>排序操作</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- sortUsingDescriptors:</span><br><span class="line">- sortUsingComparator:</span><br><span class="line">- sortWithOptions:usingComparator:</span><br><span class="line">- sortUsingFunction:context:</span><br><span class="line">- sortUsingSelector:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps:数组的排序方法会递归调用 <code>- replaceObjectAtIndex:withObject:</code><strong>在监听数组排序时需要处理多次回调的问题</strong></p>
</blockquote>
<p>通过对数组方法的分类及分析，我们对数组的方法有了大概的了解。接下来我们来制定一套协议，用来做回调操作。</p>
<h1 id="监听机制的协议商定"><a href="#监听机制的协议商定" class="headerlink" title="监听机制的协议商定"></a>监听机制的协议商定</h1><h2 id="协议行为的划分"><a href="#协议行为的划分" class="headerlink" title="协议行为的划分"></a>协议行为的划分</h2><p>从数组元素的变化行为来看，协议主要可以划分为以下几部分：</p>
<ol>
<li>元素增加<ul>
<li>单个元素的增加</li>
<li>多个元素的增加</li>
</ul>
</li>
<li>元素删除<ul>
<li>单个元素的删除</li>
<li>多个元素的删除</li>
</ul>
</li>
<li>元素的替换<ul>
<li>单个元素的替换</li>
</ul>
</li>
<li>数组改变了<ul>
<li>删除所有元素</li>
<li>批量元素的替换</li>
<li>数组的排序操作</li>
<li>数组元素的筛选</li>
</ul>
</li>
<li>数组元素的交换<ul>
<li>元素的交换</li>
</ul>
</li>
</ol>
<h2 id="参数商定"><a href="#参数商定" class="headerlink" title="参数商定"></a>参数商定</h2><p>监听数组变化，哪些数据需要被回调回来呢？<br>通过参考表格协议和同事进行商讨决定</p>
<p>对于数组元素的添加／删除操作需要将以下数据回调回来：</p>
<ul>
<li>监听的数组本身</li>
<li>添加删除的元素对象</li>
<li>及对应的索引返回。</li>
</ul>
<p>对于数组的替换操作将以下数据回调回来：</p>
<ul>
<li>监听数组对象本身</li>
<li>替换的对象</li>
<li>替换的新对象</li>
<li>对象的索引</li>
</ul>
<p>对于数组改变了的相关操作，考虑到期复杂度相对较高，先采用较简单的方式处理，简洁明了的告诉协议的遵守者，说数组变了，回调回监听的数组对象本身。<br>对于数组元素的交换，将以下数据回调：</p>
<ul>
<li>监听的数组本身</li>
<li>交换的下标1</li>
<li>将交的下标2</li>
</ul>
<h2 id="协议确认"><a href="#协议确认" class="headerlink" title="协议确认"></a>协议确认</h2><figure class="highlight objc"><figcaption><span>数组监听协议</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">NSmutableArrayOberver</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line"><span class="meta">#pragma mark - 增加</span></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span>*)array didAddObject:(<span class="keyword">id</span>)anObject atIndex:(<span class="built_in">NSInteger</span>)index;</span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span>*)array didAddObjects:(<span class="built_in">NSArray</span> *)objects atIndexes:(<span class="built_in">NSIndexSet</span>*)indexSet;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 删除</span></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span> *)array didDeleteObject:(<span class="keyword">id</span>)anObject atIndex:(<span class="built_in">NSInteger</span>)index;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span> *)array didDeleteObjects:(<span class="built_in">NSArray</span>*)objects atIndexes:(<span class="built_in">NSIndexSet</span>*)indexes;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark  - 替换</span></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span>*)array replaceObject:(<span class="keyword">id</span> )object withObject:(<span class="keyword">id</span>)anObject atIndex:(<span class="built_in">NSUInteger</span>)index;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark  - 改变（排序）</span></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)mutableArrayhasChanged:(<span class="built_in">NSMutableArray</span>*)array;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 位置交换</span></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span>*)array exchangeObjectAtIndex:(<span class="built_in">NSUInteger</span>)index1 withObjectAtIndex:(<span class="built_in">NSUInteger</span>)index2;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="使用runtime机制替换或者交换对应的函数指针IMP"><a href="#使用runtime机制替换或者交换对应的函数指针IMP" class="headerlink" title="使用runtime机制替换或者交换对应的函数指针IMP"></a>使用runtime机制替换或者交换对应的函数指针IMP</h1><ol>
<li>创建一个数组的扩展，并添加代理属性（使用<strong>关联属性</strong>添加）</li>
<li>创建相应的函数指针，并替换数组对应的方法IMP<br>这里以- insertObject:atIndex:为例：<br>创建C函数指针：<figure class="highlight c"><figcaption><span>插入一个元素的函数指针</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*insertObject_atIndex_IMP)</span><span class="params">(id self, SEL _cmd ,id anObject ,NSUInteger index)</span></span>;</span><br><span class="line"><span class="keyword">static</span> insertObject_atIndex_IMP origin_insertObject_atIndex = nil;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">replace_insertObject_atIndex</span><span class="params">(id self, SEL _cmd ,id anObject ,NSUInteger index)</span></span>&#123;</span><br><span class="line">    NSMutableArray * <span class="built_in">array</span> = self;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="built_in">array</span>.delegate conformsToProtocol:@protocol(NSmutableArrayOberver) ]&amp;&amp; [<span class="built_in">array</span>.delegate respondsToSelector:@selector(mutableArray:didAddObject:atIndex:)]) &#123;</span><br><span class="line">        </span><br><span class="line">        NSInteger number = addCount();</span><br><span class="line">        origin_insertObject_atIndex(self,_cmd,anObject,index);</span><br><span class="line">        <span class="keyword">if</span> (number==<span class="number">1</span>) &#123;</span><br><span class="line">            [<span class="built_in">array</span>.delegate mutableArray:self didAddObject:anObject atIndex:index];</span><br><span class="line">        &#125;</span><br><span class="line">        decreaseCount();</span><br><span class="line">        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        origin_insertObject_atIndex(self,_cmd,anObject,index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>替换IMP</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+(<span class="keyword">void</span>)load&#123;</span><br><span class="line">     Method method;</span><br><span class="line">    Class  <span class="keyword">class</span> = <span class="built_in">NSClassFromString</span>(<span class="string">@"__NSArrayM"</span>);</span><br><span class="line"><span class="meta">#pragma mark - 添加</span></span><br><span class="line">    method = class_getInstanceMethod(<span class="keyword">class</span>, <span class="keyword">@selector</span>(insertObject:atIndex:));</span><br><span class="line">    origin_insertObject_atIndex = (insertObject_atIndex_IMP)method_setImplementation(method, (IMP)replace_insertObject_atIndex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>PS:这里使用对一个线程变量用于统计函数的调用次数，进入函数时进行加1操作，退出时进行减1操作。如果当前调用次数为1,则在当前方法中进行回调，如果不在则不回调，由上一级调用函数进行回调。该原理类似于引用计数。</p>
</blockquote>
<p>至一个基础版本的数组监听工作已经完成，后续将兼容block的工作模式，以便提高代码的高聚合。</p>
<p>参考博客：</p>
<ol>
<li><a href="http://www.cocoachina.com/ios/20150717/12623.html" target="_blank" rel="noopener">轻松学习之 IMP指针的作用</a></li>
<li><a href="http://southpeak.github.io/2014/11/03/objective-c-runtime-3/" target="_blank" rel="noopener">Objective-C Runtime 运行时之三：方法与消息</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="page/11/">11</a><a class="extend next" rel="next" href="page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">志鹏</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">107</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">志鹏</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="js/src/bootstrap.js?v=5.1.3"></script>



  


  








  












  





  

  

  

  
  

  

  

  

</body>
</html>
