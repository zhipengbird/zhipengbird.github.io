<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="../../css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="../../atom.xml" title="志鹏的技术博客" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="志鹏的技术博客">
<meta property="og:url" content="http://yuanph.org/page/2/index.html">
<meta property="og:site_name" content="志鹏的技术博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="志鹏的技术博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yuanph.org/page/2/"/>





  <title>志鹏的技术博客</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?hexo5154a045f583f13e4b93ee8041fa5efc";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">志鹏的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记录成长的点滴</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/09/03/swordOffer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/09/03/swordOffer/" itemprop="url">swordOffer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-03T17:26:49+08:00">
                2017-09-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="代码的完整性"><a href="#代码的完整性" class="headerlink" title="代码的完整性"></a>代码的完整性</h1><h2 id="从3方面确保代码的完整性"><a href="#从3方面确保代码的完整性" class="headerlink" title="从3方面确保代码的完整性"></a>从3方面确保代码的完整性</h2><ol>
<li>功能测试</li>
<li>边界测试</li>
<li>负面测试<br>从这3 方面设计测试用例，以保证代码的完整性。<h2 id="3种错误处理的方法"><a href="#3种错误处理的方法" class="headerlink" title="3种错误处理的方法"></a>3种错误处理的方法</h2></li>
<li>用函数返回值来告诉调用都是否出错。</li>
<li>当错误发生时设置一个全局变量</li>
<li>抛出异常<img src="/2017/09/03/swordOffer/threemethodForException.jpg" title="三种异常的对比"> 
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/07/21/HookArrayBinder/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/07/21/HookArrayBinder/" itemprop="url">将容器列表视图从控制器分离，做到数据驱动UI</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-21T11:49:12+08:00">
                2017-07-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/07/20/git使用小技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/07/20/git使用小技巧/" itemprop="url">git 命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-20T13:23:52+08:00">
                2017-07-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>移除本地仓库的远程git<br>使用 <code>git remote rm</code>命令解除本地创建与远程git的绑定关系<br><code>git remote rm</code>命令需要传入一个参数 <code>远程仓库名</code><br>示例：<figure class="highlight ruby"><figcaption><span>查看当前的远程仓库</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$git remote -v </span><br><span class="line">origin	git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:yuanph/HookArray</span>.git (fetch)</span><br><span class="line">origin	git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:yuanph/HookArray</span>.git (push)</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>移除远程git</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote rm origin</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>添加新远程仓库</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$git remote add origin git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:shareCode/HookArray</span>.git</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>查看当前的远程仓库</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$git remote -v </span><br><span class="line">origin	git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:shareCode/HookArray</span>.git (fetch)</span><br><span class="line">origin	git@192.<span class="number">168.250</span>.<span class="number">71</span><span class="symbol">:shareCode/HookArray</span>.git (push)</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/07/12/NSPredicate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/07/12/NSPredicate/" itemprop="url">NSPredicate</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-12T11:35:48+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="NSPredicate是什么？"><a href="#NSPredicate是什么？" class="headerlink" title="NSPredicate是什么？"></a>NSPredicate是什么？</h1><p>NSPredicate是一个Foundation类，它指定数据被获取或者过滤的方式。它的查询语言就像SQL的WHERE和正则表达式的交叉一样，提供了具有表现力的，自然语言界面来定义一个集合被搜寻的逻辑条件</p>
<h1 id="集合中使用NSPredicate"><a href="#集合中使用NSPredicate" class="headerlink" title="集合中使用NSPredicate"></a>集合中使用NSPredicate</h1><p>Foundation提供使用谓词（predicate）来过滤NSArray／NSMutableArray&amp;NSSet／NSMutableSet的方法。</p>
<p>不可变的集合，NSArray&amp;NSSet，有可以通过评估接收到的predicate来返回一个不可变集合的方法filteredArrayUsingPredicate:和filteredSetUsingPredicate:。</p>
<p>可变集合，NSMutableArray&amp;NSMutableSet，可以使用方法filterUsingPredicate:，它可以通过运行接收到的谓词来移除评估结果为FALSE的对象。</p>
<p>NSDictionary可以用谓词来过滤它的键和值（两者都为NSArray对象）。NSOrderedSet可以由过滤的NSArray或NSSet生成一个新的有序的集，或者NSMutableSet可以简单的removeObjectsInArray:，来传递通过_否定_predicate过滤的对象。</p>
<h1 id="Core-Data中使用NSPredicate"><a href="#Core-Data中使用NSPredicate" class="headerlink" title="Core Data中使用NSPredicate"></a>Core Data中使用NSPredicate</h1><p>NSFetchRequest有一个predicate属性，它可以指定管理对象应该被获取的逻辑条件。谓词的使用规则在这里同样适用，唯一的区别在于，在管理对象环境中，谓词由持久化存储助理（persistent store coordinator）评估，而不像集合那样在内存中被过滤</p>
<figure class="highlight objc"><figcaption><span>data</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> *firstName;</span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSString</span> *lastName;</span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">NSNumber</span> *age;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Person</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)description &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@ %@"</span>, <span class="keyword">self</span>.firstName, <span class="keyword">self</span>.lastName];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark -</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span> *firstNames = @[ <span class="string">@"Alice"</span>, <span class="string">@"Bob"</span>, <span class="string">@"Charlie"</span>, <span class="string">@"Quentin"</span> ];</span><br><span class="line"><span class="built_in">NSArray</span> *lastNames = @[ <span class="string">@"Smith"</span>, <span class="string">@"Jones"</span>, <span class="string">@"Smith"</span>, <span class="string">@"Alberts"</span> ];</span><br><span class="line"><span class="built_in">NSArray</span> *ages = @[ @<span class="number">24</span>, @<span class="number">27</span>, @<span class="number">33</span>, @<span class="number">31</span> ];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableArray</span> *people = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">[firstNames enumerateObjectsUsingBlock:^(<span class="keyword">id</span> obj, <span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">    Person *person = [[Person alloc] init];</span><br><span class="line">    person.firstName = firstNames[idx];</span><br><span class="line">    person.lastName = lastNames[idx];</span><br><span class="line">    person.age = ages[idx];</span><br><span class="line">    [people addObject:person];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSPredicate</span> *bobPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"firstName = 'Bob'"</span>];</span><br><span class="line"><span class="built_in">NSPredicate</span> *smithPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"lastName = %@"</span>, <span class="string">@"Smith"</span>];</span><br><span class="line"><span class="built_in">NSPredicate</span> *thirtiesPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"age &gt;= 30"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Bob Jones"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Bobs: %@"</span>, [people filteredArrayUsingPredicate:bobPredicate]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Alice Smith", "Charlie Smith"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Smiths: %@"</span>, [people filteredArrayUsingPredicate:smithPredicate]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Charlie Smith", "Quentin Alberts"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"30's: %@"</span>, [people filteredArrayUsingPredicate:thirtiesPredicate]);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="谓词语法"><a href="#谓词语法" class="headerlink" title="谓词语法"></a>谓词语法</h1><h2 id="替换（占位符）"><a href="#替换（占位符）" class="headerlink" title="替换（占位符）"></a>替换（占位符）</h2><ul>
<li>%@是对值为字符串，数字或者日期的对象的替换值。(变量值)</li>
<li><p>%K是key path的替换值。（变量名）</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSPredicate</span> *ageIs33Predicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"%K = %@"</span>, <span class="string">@"age"</span>, @<span class="number">33</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Charlie Smith"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"Age 33: %@"</span>, [people filteredArrayUsingPredicate:ageIs33Predicate]);</span><br></pre></td></tr></table></figure>
</li>
<li><p>$VARIABLE_NAME是可以被NSPredicate -predicateWithSubstitutionVariables:替换的值。</p>
<figure class="highlight objc"><figcaption><span>变量</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSPredicate</span> *namesBeginningWithLetterPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"(firstName BEGINSWITH[cd] $letter) OR (lastName BEGINSWITH[cd] $letter)"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["Alice Smith", "Quentin Alberts"]</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"'A' Names: %@"</span>, [people filteredArrayUsingPredicate:[namesBeginningWithLetterPredicate predicateWithSubstitutionVariables:@&#123;<span class="string">@"letter"</span>: <span class="string">@"A"</span>&#125;]]);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="基本比较"><a href="#基本比较" class="headerlink" title="基本比较"></a>基本比较</h2><ul>
<li>=, ==：左边的表达式和右边的表达式相等。</li>
<li>‘&gt;=’, =&gt;：左边的表达式大于或者等于右边的表达式。</li>
<li>&lt;=, =&lt;：左边的表达式小于等于右边的表达式。</li>
<li>‘&gt;’：左边的表达式大于右边的表达式。</li>
<li>&lt;：左边的表达式小于右边的表达式。</li>
<li>!=, &lt;&gt;：左边的表达式不等于右边的表达式。</li>
<li>BETWEEN：左边的表达式等于右边的表达式的值或者介于它们之间。右边是一个有两个指定上限和下限的数值的数列（指定顺序的数列）。比如，1 BETWEEN { 0 , 33 }，或者$INPUT BETWEEN { $LOWER, $UPPER }。</li>
</ul>
<h2 id="基本复合谓词"><a href="#基本复合谓词" class="headerlink" title="基本复合谓词"></a>基本复合谓词</h2><ul>
<li>AND, &amp;&amp;：逻辑与.</li>
<li>OR, ||：逻辑或.</li>
<li>NOT, !：逻辑非.</li>
</ul>
<h2 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h2><p>字符串比较在默认的情况下是<strong>区分大小写和音调</strong>的。你可以在方括号中用关键字符c和d来修改操作符以相应的指定不区分大小写和变音符号，比如firstname BEGINSWITH[cd] $FIRST_NAME。</p>
<ul>
<li>BEGINSWITH：左边的表达式以右边的表达式作为开始。</li>
<li>CONTAINS：左边的表达式包含右边的表达式。</li>
<li>ENDSWITH：左边的表达式以右边的表达式作为结束。</li>
<li>LIKE：左边的表达式等于右边的表达式：?和<em>可作为通配符，其中?匹配1个字符，</em>匹配0个或者多个字符。</li>
<li>MATCHES：左边的表达式根据ICU v3（更多内容请查看ICU User Guide for Regular Expressions）的regex风格比较，等于右边的表达式</li>
</ul>
<h2 id="关系操作"><a href="#关系操作" class="headerlink" title="关系操作"></a>关系操作</h2><ul>
<li>ANY，SOME：指定下列表达式中的任意元素。比如，ANY children.age &lt; 18。</li>
<li>ALL：指定下列表达式中的所有元素。比如，ALL children.age &lt; 18。</li>
<li>NONE：指定下列表达式中没有的元素。比如，NONE children.age &lt; 18。它在逻辑上等于NOT (ANY …)。</li>
<li>IN：等于SQL的IN操作，左边的表达必须出现在右边指定的集合中。比如，name IN { ‘Ben’, ‘Melissa’, ‘Nick’ }。</li>
</ul>
<h2 id="数组操作"><a href="#数组操作" class="headerlink" title="数组操作"></a>数组操作</h2><ul>
<li>array[index]：指定数组中特定索引处的元素。</li>
<li>array[FIRST]：指定数组中的第一个元素。</li>
<li>array[LAST]：指定数组中的最后一个元素。</li>
<li>array[SIZE]：指定数组的大小。</li>
</ul>
<h2 id="布尔值谓词"><a href="#布尔值谓词" class="headerlink" title="布尔值谓词"></a>布尔值谓词</h2><ul>
<li>TRUEPREDICATE：结果始终为真的谓词。</li>
<li>FALSEPREDICATE：结果始终为假的谓词。</li>
</ul>
<h2 id="直接量"><a href="#直接量" class="headerlink" title="直接量"></a>直接量</h2><p>在谓词表达式中可以使用如下直接量</p>
<ul>
<li>FALSE、NO：代表逻辑假</li>
<li>TRUE、YES：代表逻辑真</li>
<li>NULL、NIL：代表空值</li>
<li>SELF：代表正在被判断的对象自身</li>
<li>“string”或’string’：代表字符串</li>
<li>数组：和c中的写法相同，如：{‘one’, ‘two’, ‘three’}。</li>
<li>数值：包括证书、小数和科学计数法表示的形式</li>
<li>十六进制数：0x开头的数字</li>
<li>八进制：0o开头的数字</li>
<li>二进制：0b开头的数字</li>
</ul>
<h2 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h2><blockquote>
<p>下列单词都是保留字（不论大小写）</p>
<p>AND、OR、IN、NOT、ALL、ANY、SOME、NONE、LIKE、CASEINSENSITIVE、CI、MATCHES、CONTAINS、BEGINSWITH、ENDSWITH、BETWEEN、NULL、NIL、SELF、TRUE、YES、FALSE、NO、FIRST、LAST、SIZE、ANYKEY、SUBQUERY、CAST、TRUEPREDICATE、FALSEPREDICATE</p>
<p>注：虽然大小写都可以，但是更推荐使用大写来表示这些保留字</p>
</blockquote>
<h1 id="NSCompoundPredicate"><a href="#NSCompoundPredicate" class="headerlink" title="NSCompoundPredicate"></a>NSCompoundPredicate</h1><p>我们见过与&amp;或被用在谓词格式字符串中以创建复合谓词。然而，我们也可以用NSCompoundPredicate来完成同样的工作</p>
<figure class="highlight objc"><figcaption><span>下列谓词是相等的</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">NSCompoundPredicate</span> andPredicateWithSubpredicates:@[[<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"age &gt; 25"</span>], [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"firstName = %@"</span>, <span class="string">@"Quentin"</span>]]];</span><br><span class="line"></span><br><span class="line">[<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"(age &gt; 25) AND (firstName = %@)"</span>, <span class="string">@"Quentin"</span>];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/07/11/断言/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/07/11/断言/" itemprop="url">断言</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-11T16:20:56+08:00">
                2017-07-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>断言的定义：</p>
<blockquote>
<p>断言（assertion）是指在开发期间使用的、让程序在运行时进行自检的代码（通常是一个子程序或宏）。断言为真，则表明程序运行正常，而断言为假，则意味着它已经在代码中发现了意料之外的错误。断言对于大型的复杂程序或可靠性要求极高的程序来说尤其有用</p>
</blockquote>
<p>断言使用的准则与建议：<br><blockquote><ol>
<li>用错误处理代码来处理预期会发生的状况，用断言来处理绝不应该发生的状况。</li>
<li>避免把需要执行的代码放到断言中</li>
<li>用断言来注解并验证前条件和后条件</li>
<li>对于高健壮性的代码，应该先使用断言再处理错误</li>
</ol>
<footer><strong>《代码大全2》</strong><cite>-防御式编程</cite></footer></blockquote></p>
<h1 id="NSAssert"><a href="#NSAssert" class="headerlink" title="NSAssert()"></a>NSAssert()</h1><p>NSAssert()是一个宏，用于开发阶段调试程序中的Bug，通过为NSAssert()传递条件表达式来断定是否属于Bug，满足条件返回真值，程序继续运行，如果返回假值，则抛出异常，并且可以自定义异常描述。<br><figure class="highlight objc"><figcaption><span>断言的定义</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#define NSAssert(condition, desc)</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<ul>
<li>condition是条件表达式，值为YES或NO；</li>
<li>desc为异常描述，通常为NSString。</li>
<li>当conditon为YES时程序继续运行，为NO时，则抛出带有desc描述的异常信息。NSAssert()可以出现在程序的任何一个位置。</li>
</ul>
</blockquote>
<h1 id="NSAssert和assert-区别"><a href="#NSAssert和assert-区别" class="headerlink" title="NSAssert和assert 区别"></a>NSAssert和assert 区别</h1><p>NSAssert和assert都是断言,主要的差别是assert在断言失败的时候只是简单的终止程序,而NSAssert会报告出错误信息并且打印出来.所以只使用NSAssert就好,可以不去使用assert。</p>
<h1 id="断言何时运行？"><a href="#断言何时运行？" class="headerlink" title="断言何时运行？"></a>断言何时运行？</h1><p>通常在debug情况下（真机中会自动忽略），所有NSAssert都会被执行。在release下系统会自动将断言设置为禁用。如果release下断言仍可执行的话，则需要我们手动设置为，设置方式如下：Preprocessor Macros 的Release值为 NS_BLOCK_ASSERTIONS。</p>
<p>小延伸：如何切换Debug和Release呢？</p>
<p>自答吧：<br>1、点击工程名，点这里。选择Edit Scheme<br>2、选择Run，在Info 中将Build Configuration 修改为release</p>
<h1 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE"></a>NOTE</h1><ol>
<li>使用NSAssert的时候，每个NSAssert只检验一个条件，因为同事检验多个条件时，如果断言失败，无法直观地判断是那个条件失败</li>
<li><p>Block中使用NSAssert要特别注意循环引用。<br> 有没有搞错，用断言也会出现循环引用,不信，那我们看看宏定义展开后是啥样的？：</p>
 <figure class="highlight objc"><figcaption><span>断言的宏定义</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">#define NSAssert(condition, desc, ...)	\</span></span><br><span class="line">   <span class="keyword">do</span> &#123;				\</span><br><span class="line">__PRAGMA_PUSH_NO_EXTRA_ARG_WARNINGS \</span><br><span class="line"><span class="keyword">if</span> (!(condition)) &#123;		\</span><br><span class="line">           <span class="built_in">NSString</span> *__assert_file__ = [<span class="built_in">NSString</span> stringWithUTF8String:__FILE__]; \</span><br><span class="line">           __assert_file__ = __assert_file__ ? __assert_file__ : <span class="string">@"&lt;Unknown File&gt;"</span>; \</span><br><span class="line">    [[<span class="built_in">NSAssertionHandler</span> currentHandler] handleFailureInMethod:_cmd \</span><br><span class="line">	object:<span class="keyword">self</span> file:__assert_file__ \</span><br><span class="line">    	lineNumber:__LINE__ description:(desc), <span class="meta">##__VA_ARGS__]; \</span></span><br><span class="line">&#125;				\</span><br><span class="line">       __PRAGMA_POP_NO_EXTRA_ARG_WARNINGS \</span><br><span class="line">   &#125; <span class="keyword">while</span>(<span class="number">0</span>)</span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<p> 看到没，宏定义展开后会出现对self的持有，容易导致循环引用！！！。有没有解决方法，必须呀，使用  <code>NSCAssert</code>！，你确信吗？不信，展开看看：</p>
 <figure class="highlight objc"><figcaption><span>NSCAssert</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">#define NSCAssert(condition, desc, ...) \</span></span><br><span class="line">   <span class="keyword">do</span> &#123;				\</span><br><span class="line">__PRAGMA_PUSH_NO_EXTRA_ARG_WARNINGS \</span><br><span class="line"><span class="keyword">if</span> (!(condition)) &#123;		\</span><br><span class="line">           <span class="built_in">NSString</span> *__assert_fn__ = [<span class="built_in">NSString</span> stringWithUTF8String:__PRETTY_FUNCTION__]; \</span><br><span class="line">           __assert_fn__ = __assert_fn__ ? __assert_fn__ : <span class="string">@"&lt;Unknown Function&gt;"</span>; \</span><br><span class="line">           <span class="built_in">NSString</span> *__assert_file__ = [<span class="built_in">NSString</span> stringWithUTF8String:__FILE__]; \</span><br><span class="line">           __assert_file__ = __assert_file__ ? __assert_file__ : <span class="string">@"&lt;Unknown File&gt;"</span>; \</span><br><span class="line">    [[<span class="built_in">NSAssertionHandler</span> currentHandler] handleFailureInFunction:__assert_fn__ \</span><br><span class="line">	file:__assert_file__ \</span><br><span class="line">    	lineNumber:__LINE__ description:(desc), <span class="meta">##__VA_ARGS__]; \</span></span><br><span class="line">&#125;				\</span><br><span class="line">       __PRAGMA_POP_NO_EXTRA_ARG_WARNINGS \</span><br><span class="line">   &#125; <span class="keyword">while</span>(<span class="number">0</span>)</span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<p> 宏定义中并没有出现self，所以在block中使用NSCAssert可以避免循环引用的发生。</p>
</li>
<li><p>频繁地调用会极大的影响程序的性能，增加额外开销。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/07/10/NSMutableArray/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/07/10/NSMutableArray/" itemprop="url">监听NSMutableArray的变化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-10T10:19:00+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>平时工作中我们接触最多的容器，可能就数字典与数组了。有时我们在使用这些容器时有这样一个困惑，容器中的数据改变了，我们却无法立即知道。近日小编因为这个感到有些小苦恼，思来想去发现还是有途径可以做到监听容器的变化。<br>接下来我将会用文字将我的想法叙述出来，供大家参考。<br>要想监听一个容器的变化，首先我们需要对这个容器的属性及方法有着深入的了解。要监听容器的元素改变，那肯定是针对于可变容器。我们先着手于可变数组的监听工作。<br>接下来的工作将分成三部分：</p>
<ol>
<li>可变数组容器的分析</li>
<li>设计一套监听回调机制</li>
<li>使用runtime机制替换或者交换对应的函数指针IMP</li>
</ol>
<p>现在我们开始着手分析可变数组的方法。</p>
<h1 id="可变数组的分析"><a href="#可变数组的分析" class="headerlink" title="可变数组的分析"></a>可变数组的分析</h1><h2 id="可变数组的定义"><a href="#可变数组的定义" class="headerlink" title="可变数组的定义"></a>可变数组的定义</h2><p><strong>NSMutableArray</strong>定义了一套接口用于管理可变数组对象，该类的添加／插入／删除基础操作继承于不可变数组<strong>NSArray</strong></p>
<h2 id="可变数组的方法分类"><a href="#可变数组的方法分类" class="headerlink" title="可变数组的方法分类"></a>可变数组的方法分类</h2><p>通过查阅苹果的官方文档，我们大致可以将可变数组的方法分为以下几部分：</p>
<ol>
<li>创建和初始化一个可变数组</li>
<li>数组元素的添加操作</li>
<li>数组元素的删除操作</li>
<li>数组元素的替换操作</li>
<li>数组内容的筛选操作</li>
<li>数组内容的排序操作</li>
</ol>
<p>下面我将各部分的相关函数贴出，以便大家更好的直观了解。</p>
<h3 id="创建和初始化一个可变数组"><a href="#创建和初始化一个可变数组" class="headerlink" title="创建和初始化一个可变数组"></a>创建和初始化一个可变数组</h3><figure class="highlight objc"><figcaption><span>类方法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ arrayWithCapacity:</span><br><span class="line">+ arrayWithContentsOfFile:</span><br><span class="line">+ arrayWithContentsOfURL:</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>实例方法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- init</span><br><span class="line">- initWithCapacity:</span><br><span class="line">- initWithContentsOfFile:</span><br><span class="line">- initWithContentsOfURL:</span><br></pre></td></tr></table></figure>
<h3 id="数组元素的添加操作"><a href="#数组元素的添加操作" class="headerlink" title="数组元素的添加操作"></a>数组元素的添加操作</h3><figure class="highlight objc"><figcaption><span>元素的添加</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- addObject:</span><br><span class="line">- addObjectsFromArray:</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>元素的插入</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- insertObject:atIndex:</span><br><span class="line">- insertObjects:atIndexes:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps:批量元素的插入会调用多次单个元素的插入方法，<strong><em>在以后的监听过程中需要做些特殊的处理</em></strong><br><figure class="highlight objc"><figcaption><span>批量元素的插入</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">void</span> insertObjects:(<span class="built_in">NSArray</span> *)additions atIndexes:(<span class="built_in">NSIndexSet</span> *)indexes</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSUInteger</span> currentIndex = [indexes firstIndex];</span><br><span class="line">    <span class="built_in">NSUInteger</span> i, count = [indexes count];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        [<span class="keyword">self</span> insertObject:[additions objectAtIndex:i] atIndex:currentIndex];</span><br><span class="line">        currentIndex = [indexes indexGreaterThanIndex:currentIndex];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="数组元素的删除操作"><a href="#数组元素的删除操作" class="headerlink" title="数组元素的删除操作"></a>数组元素的删除操作</h3><figure class="highlight objc"><figcaption><span>删除单个元素</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除元素的删除</span></span><br><span class="line">- removeLastObject</span><br><span class="line">- removeObjectAtIndex:</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>批量删除</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 批量元素的删除</span></span><br><span class="line">- removeAllObjects</span><br><span class="line">- removeObject:</span><br><span class="line">- removeObject:inRange:</span><br><span class="line">- removeObjectsAtIndexes:</span><br><span class="line">- removeObjectIdenticalTo:</span><br><span class="line">- removeObjectIdenticalTo:inRange:</span><br><span class="line">- removeObjectsInArray:</span><br><span class="line">- removeObjectsInRange:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps： 以下方法会多次调用<code>- removeObjectAtIndex:</code>方法：,在监听过程中需要处理多次调用问题。<br><figure class="highlight objc"><figcaption><span>多次调用- removeObjectAtIndex:</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- removeObject:</span><br><span class="line">- removeObject:inRange:</span><br><span class="line">- removeObjectIdenticalTo:</span><br><span class="line">- removeObjectIdenticalTo:inRange:</span><br><span class="line">- removeObjectsInArray:</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="数组元素的替换操作"><a href="#数组元素的替换操作" class="headerlink" title="数组元素的替换操作"></a>数组元素的替换操作</h3><figure class="highlight objc"><figcaption><span>单个元素的替换</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- replaceObjectAtIndex:withObject:</span><br><span class="line">- setObject:atIndexedSubscript:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps：<code>- setObject:atIndexedSubscript:</code>这个方法我们最好不要直接使用而是使用语法糖的形式调用。<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mutableArray[<span class="number">3</span>] = <span class="string">@"someValue"</span>; </span><br><span class="line"><span class="comment">// equivalent to </span></span><br><span class="line">[mutableArray replaceObjectAtIndex:<span class="number">3</span> withObject:<span class="string">@"someValue"</span>];</span><br></pre></td></tr></table></figure></p>
<p>若替换对象为空会抛出<code>NSInvalidArgumentException</code>异常，若索引下标越界会抛出<code>NSRangeException</code>异常</p>
</blockquote>
<figure class="highlight objc"><figcaption><span>批量元素的替换</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- replaceObjectsAtIndexes:withObjects:</span><br><span class="line">- replaceObjectsInRange:withObjectsFromArray:range:</span><br><span class="line">- replaceObjectsInRange:withObjectsFromArray:</span><br><span class="line">- setArray:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps: 以下方法会调用多次<code>- replaceObjectAtIndex:withObject:</code>方法<br><figure class="highlight objc"><figcaption><span>多次调用- replaceObjectAtIndex:withObject:</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- replaceObjectsAtIndexes:withObjects:</span><br><span class="line"><span class="comment">//PS: objects的个数必须与indexes的个数相同，否则会抛出异常</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="数组元素的筛选"><a href="#数组元素的筛选" class="headerlink" title="数组元素的筛选"></a>数组元素的筛选</h3><figure class="highlight objc"><figcaption><span>筛选</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- filterUsingPredicate:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps： 会在数组中直接筛选出符合条件的数组元素，不符合的会直接删除</p>
</blockquote>
<h3 id="数组元素的排序"><a href="#数组元素的排序" class="headerlink" title="数组元素的排序"></a>数组元素的排序</h3><figure class="highlight objc"><figcaption><span>下标元素的交换</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- exchangeObjectAtIndex:withObjectAtIndex:</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>排序操作</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- sortUsingDescriptors:</span><br><span class="line">- sortUsingComparator:</span><br><span class="line">- sortWithOptions:usingComparator:</span><br><span class="line">- sortUsingFunction:context:</span><br><span class="line">- sortUsingSelector:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ps:数组的排序方法会递归调用 <code>- replaceObjectAtIndex:withObject:</code><strong>在监听数组排序时需要处理多次回调的问题</strong></p>
</blockquote>
<p>通过对数组方法的分类及分析，我们对数组的方法有了大概的了解。接下来我们来制定一套协议，用来做回调操作。</p>
<h1 id="监听机制的协议商定"><a href="#监听机制的协议商定" class="headerlink" title="监听机制的协议商定"></a>监听机制的协议商定</h1><h2 id="协议行为的划分"><a href="#协议行为的划分" class="headerlink" title="协议行为的划分"></a>协议行为的划分</h2><p>从数组元素的变化行为来看，协议主要可以划分为以下几部分：</p>
<ol>
<li>元素增加<ul>
<li>单个元素的增加</li>
<li>多个元素的增加</li>
</ul>
</li>
<li>元素删除<ul>
<li>单个元素的删除</li>
<li>多个元素的删除</li>
</ul>
</li>
<li>元素的替换<ul>
<li>单个元素的替换</li>
</ul>
</li>
<li>数组改变了<ul>
<li>删除所有元素</li>
<li>批量元素的替换</li>
<li>数组的排序操作</li>
<li>数组元素的筛选</li>
</ul>
</li>
<li>数组元素的交换<ul>
<li>元素的交换</li>
</ul>
</li>
</ol>
<h2 id="参数商定"><a href="#参数商定" class="headerlink" title="参数商定"></a>参数商定</h2><p>监听数组变化，哪些数据需要被回调回来呢？<br>通过参考表格协议和同事进行商讨决定</p>
<p>对于数组元素的添加／删除操作需要将以下数据回调回来：</p>
<ul>
<li>监听的数组本身</li>
<li>添加删除的元素对象</li>
<li>及对应的索引返回。</li>
</ul>
<p>对于数组的替换操作将以下数据回调回来：</p>
<ul>
<li>监听数组对象本身</li>
<li>替换的对象</li>
<li>替换的新对象</li>
<li>对象的索引</li>
</ul>
<p>对于数组改变了的相关操作，考虑到期复杂度相对较高，先采用较简单的方式处理，简洁明了的告诉协议的遵守者，说数组变了，回调回监听的数组对象本身。<br>对于数组元素的交换，将以下数据回调：</p>
<ul>
<li>监听的数组本身</li>
<li>交换的下标1</li>
<li>将交的下标2</li>
</ul>
<h2 id="协议确认"><a href="#协议确认" class="headerlink" title="协议确认"></a>协议确认</h2><figure class="highlight objc"><figcaption><span>数组监听协议</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">NSmutableArrayOberver</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line"><span class="meta">#pragma mark - 增加</span></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span>*)array didAddObject:(<span class="keyword">id</span>)anObject atIndex:(<span class="built_in">NSInteger</span>)index;</span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span>*)array didAddObjects:(<span class="built_in">NSArray</span> *)objects atIndexes:(<span class="built_in">NSIndexSet</span>*)indexSet;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 删除</span></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span> *)array didDeleteObject:(<span class="keyword">id</span>)anObject atIndex:(<span class="built_in">NSInteger</span>)index;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span> *)array didDeleteObjects:(<span class="built_in">NSArray</span>*)objects atIndexes:(<span class="built_in">NSIndexSet</span>*)indexes;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark  - 替换</span></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span>*)array replaceObject:(<span class="keyword">id</span> )object withObject:(<span class="keyword">id</span>)anObject atIndex:(<span class="built_in">NSUInteger</span>)index;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark  - 改变（排序）</span></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)mutableArrayhasChanged:(<span class="built_in">NSMutableArray</span>*)array;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 位置交换</span></span><br><span class="line">-(<span class="keyword">void</span>)mutableArray:(<span class="built_in">NSMutableArray</span>*)array exchangeObjectAtIndex:(<span class="built_in">NSUInteger</span>)index1 withObjectAtIndex:(<span class="built_in">NSUInteger</span>)index2;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="使用runtime机制替换或者交换对应的函数指针IMP"><a href="#使用runtime机制替换或者交换对应的函数指针IMP" class="headerlink" title="使用runtime机制替换或者交换对应的函数指针IMP"></a>使用runtime机制替换或者交换对应的函数指针IMP</h1><ol>
<li>创建一个数组的扩展，并添加代理属性（使用<strong>关联属性</strong>添加）</li>
<li>创建相应的函数指针，并替换数组对应的方法IMP<br>这里以- insertObject:atIndex:为例：<br>创建C函数指针：<figure class="highlight c"><figcaption><span>插入一个元素的函数指针</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*insertObject_atIndex_IMP)</span><span class="params">(id self, SEL _cmd ,id anObject ,NSUInteger index)</span></span>;</span><br><span class="line"><span class="keyword">static</span> insertObject_atIndex_IMP origin_insertObject_atIndex = nil;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">replace_insertObject_atIndex</span><span class="params">(id self, SEL _cmd ,id anObject ,NSUInteger index)</span></span>&#123;</span><br><span class="line">    NSMutableArray * <span class="built_in">array</span> = self;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="built_in">array</span>.delegate conformsToProtocol:@protocol(NSmutableArrayOberver) ]&amp;&amp; [<span class="built_in">array</span>.delegate respondsToSelector:@selector(mutableArray:didAddObject:atIndex:)]) &#123;</span><br><span class="line">        </span><br><span class="line">        NSInteger number = addCount();</span><br><span class="line">        origin_insertObject_atIndex(self,_cmd,anObject,index);</span><br><span class="line">        <span class="keyword">if</span> (number==<span class="number">1</span>) &#123;</span><br><span class="line">            [<span class="built_in">array</span>.delegate mutableArray:self didAddObject:anObject atIndex:index];</span><br><span class="line">        &#125;</span><br><span class="line">        decreaseCount();</span><br><span class="line">        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        origin_insertObject_atIndex(self,_cmd,anObject,index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>替换IMP</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+(<span class="keyword">void</span>)load&#123;</span><br><span class="line">     Method method;</span><br><span class="line">    Class  <span class="keyword">class</span> = <span class="built_in">NSClassFromString</span>(<span class="string">@"__NSArrayM"</span>);</span><br><span class="line"><span class="meta">#pragma mark - 添加</span></span><br><span class="line">    method = class_getInstanceMethod(<span class="keyword">class</span>, <span class="keyword">@selector</span>(insertObject:atIndex:));</span><br><span class="line">    origin_insertObject_atIndex = (insertObject_atIndex_IMP)method_setImplementation(method, (IMP)replace_insertObject_atIndex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>PS:这里使用对一个线程变量用于统计函数的调用次数，进入函数时进行加1操作，退出时进行减1操作。如果当前调用次数为1,则在当前方法中进行回调，如果不在则不回调，由上一级调用函数进行回调。该原理类似于引用计数。</p>
</blockquote>
<p>至一个基础版本的数组监听工作已经完成，后续将兼容block的工作模式，以便提高代码的高聚合。</p>
<p>参考博客：</p>
<ol>
<li><a href="http://www.cocoachina.com/ios/20150717/12623.html" target="_blank" rel="noopener">轻松学习之 IMP指针的作用</a></li>
<li><a href="http://southpeak.github.io/2014/11/03/objective-c-runtime-3/" target="_blank" rel="noopener">Objective-C Runtime 运行时之三：方法与消息</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/07/06/NSIndexSet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/07/06/NSIndexSet/" itemprop="url">NSIndexSet</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-06T11:13:46+08:00">
                2017-07-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote><p>The NSIndexSet class represents an immutable collection of unique unsigned integers, known as indexes because of the way they are used. This collection is referred to as an index set. Indexes must be in the range 0 .. NSNotFound - 1.</p>
<footer><strong>苹果官方的定义</strong></footer></blockquote>
<p>NSIndexSet (以及它的可修改子类, NSMutableIndexSet) 是一个排好序的，无重复元素的整数集合。它看上去有点像 支持离散整数的 NSRange .它能用于快速查找特定范围的值的索引，也能用于快速计算交集, 同时，Foundation collection class 提供了很多好用的方法，方便你使用 NSIndexSet.</p>
<p>Foundataion framework 里面到处可以看到 NSIndexSet 的影子。 任何从已排序容器(比如 array, 或者 table view 的 data source)里面获取多个元素的方法都会用到 NSIndexSet 做为参数。</p>
<ul>
<li><p>NSIndexSet方法可以划分成以下几部分</p>
<ul>
<li>创建索引</li>
<li>查询索引</li>
<li>枚举索引内容</li>
<li>比较索引</li>
<li>获取子索引</li>
<li>枚举索引</li>
</ul>
</li>
<li><p>NSMutableIndexSet的方法划分：</p>
<ul>
<li>增加／删除一个索引集合</li>
<li>增加／删除单个索引</li>
<li>增加／删除一个子范围</li>
</ul>
</li>
</ul>
<h1 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h1><figure class="highlight objc"><figcaption><span>创建索引</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个空的索引集合。</span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)indexSet;</span><br><span class="line"><span class="comment">//创建一个索引集合，根据索引值</span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)indexSetWithIndex:(<span class="built_in">NSUInteger</span>)value;</span><br><span class="line"><span class="comment">//创建一个索引集合，根据一个NSRange对象</span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)indexSetWithIndexesInRange:(<span class="built_in">NSRange</span>)range;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个索引集合，根据一个NSRange对象</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithIndexesInRange:(<span class="built_in">NSRange</span>)range <span class="built_in">NS_DESIGNATED_INITIALIZER</span>;</span><br><span class="line"><span class="comment">//用一个已有集合创建一个新的集合</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithIndexSet:(<span class="built_in">NSIndexSet</span> *)indexSet <span class="built_in">NS_DESIGNATED_INITIALIZER</span>;</span><br><span class="line"><span class="comment">//根据索引值创建一个索引集合</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithIndex:(<span class="built_in">NSUInteger</span>)value;</span><br></pre></td></tr></table></figure>
<h1 id="查询索引"><a href="#查询索引" class="headerlink" title="查询索引"></a>查询索引</h1><figure class="highlight objc"><figcaption><span>包含索引</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ndicates whether the index set contains a specific index.</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)containsIndex:(<span class="built_in">NSUInteger</span>)value;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Indicates whether the receiving index set contains a superset of the indexes in another index set.</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)containsIndexes:(<span class="built_in">NSIndexSet</span> *)indexSet;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Indicates whether the index set contains the indexes represented by an index range.</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)containsIndexesInRange:(<span class="built_in">NSRange</span>)range;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断集合中的索引是否有一个或多个在Range中</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)intersectsIndexesInRange:(<span class="built_in">NSRange</span>)range;</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>block查询</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSUInteger</span>)indexPassingTest:(<span class="built_in">BOOL</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))predicate <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br><span class="line">- (<span class="built_in">NSUInteger</span>)indexWithOptions:(<span class="built_in">NSEnumerationOptions</span>)opts passingTest:(<span class="built_in">BOOL</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))predicate <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br><span class="line">- (<span class="built_in">NSUInteger</span>)indexInRange:(<span class="built_in">NSRange</span>)range options:(<span class="built_in">NSEnumerationOptions</span>)opts passingTest:(<span class="built_in">BOOL</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))predicate <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSIndexSet</span> *)indexesPassingTest:(<span class="built_in">BOOL</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))predicate <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br><span class="line">- (<span class="built_in">NSIndexSet</span> *)indexesWithOptions:(<span class="built_in">NSEnumerationOptions</span>)opts passingTest:(<span class="built_in">BOOL</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))predicate <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br><span class="line">- (<span class="built_in">NSIndexSet</span> *)indexesInRange:(<span class="built_in">NSRange</span>)range options:(<span class="built_in">NSEnumerationOptions</span>)opts passingTest:(<span class="built_in">BOOL</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))predicate <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>获取大小</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取索引集合在某一范围中的个数</span></span><br><span class="line">- (<span class="built_in">NSUInteger</span>)countOfIndexesInRange:(<span class="built_in">NSRange</span>)range <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_5, <span class="number">2</span>_0);</span><br><span class="line"><span class="comment">//索引集合中元素的个数</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSUInteger</span> count;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="枚举内容"><a href="#枚举内容" class="headerlink" title="枚举内容"></a>枚举内容</h1><figure class="highlight objc"><figcaption><span>枚举集合内容</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)enumerateRangesUsingBlock:(<span class="keyword">void</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSRange</span> range, <span class="built_in">BOOL</span> *stop))block <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_7, <span class="number">5</span>_0);</span><br><span class="line">- (<span class="keyword">void</span>)enumerateRangesWithOptions:(<span class="built_in">NSEnumerationOptions</span>)opts usingBlock:(<span class="keyword">void</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSRange</span> range, <span class="built_in">BOOL</span> *stop))block <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_7, <span class="number">5</span>_0);</span><br><span class="line">- (<span class="keyword">void</span>)enumerateRangesInRange:(<span class="built_in">NSRange</span>)range options:(<span class="built_in">NSEnumerationOptions</span>)opts usingBlock:(<span class="keyword">void</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSRange</span> range, <span class="built_in">BOOL</span> *stop))block <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_7, <span class="number">5</span>_0);</span><br></pre></td></tr></table></figure>
<h1 id="两集合的比较"><a href="#两集合的比较" class="headerlink" title="两集合的比较"></a>两集合的比较</h1><figure class="highlight objc"><figcaption><span>集合的比较</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//比较两集合是否相同</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)isEqualToIndexSet:(<span class="built_in">NSIndexSet</span> *)indexSet;</span><br></pre></td></tr></table></figure>
<h1 id="获取索引"><a href="#获取索引" class="headerlink" title="获取索引"></a>获取索引</h1><figure class="highlight objc"><figcaption><span>获取索引</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//The following six methods will return NSNotFound if there is no index in the set satisfying the query. </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSUInteger</span> firstIndex;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSUInteger</span> lastIndex;</span><br><span class="line">- (<span class="built_in">NSUInteger</span>)indexGreaterThanIndex:(<span class="built_in">NSUInteger</span>)value;</span><br><span class="line">- (<span class="built_in">NSUInteger</span>)indexLessThanIndex:(<span class="built_in">NSUInteger</span>)value;</span><br><span class="line">- (<span class="built_in">NSUInteger</span>)indexGreaterThanOrEqualToIndex:(<span class="built_in">NSUInteger</span>)value;</span><br><span class="line">- (<span class="built_in">NSUInteger</span>)indexLessThanOrEqualToIndex:(<span class="built_in">NSUInteger</span>)value;</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><figcaption><span>获取索引</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Fills up to bufferSize indexes in the specified range into the buffer and returns the number of indexes actually placed in the buffer;  </span></span><br><span class="line"><span class="comment">// also modifies the optional range passed in by pointer to be "positioned" after the last index filled into the buffer.  </span></span><br><span class="line"><span class="comment">// Example: if the index set contains the indexes 0, 2, 4, ..., 98, 100, for a buffer of size 10 and the range (20, 80)   </span></span><br><span class="line"><span class="comment">// the buffer would contain 20, 22, ..., 38 and the range would be modified to (40, 60).</span></span><br><span class="line">- (<span class="built_in">NSUInteger</span>)getIndexes:(<span class="built_in">NSUInteger</span> *)indexBuffer maxCount:(<span class="built_in">NSUInteger</span>)bufferSize inIndexRange:(<span class="keyword">nullable</span> <span class="built_in">NSRangePointer</span>)range;</span><br></pre></td></tr></table></figure>
<h1 id="枚举索引集合"><a href="#枚举索引集合" class="headerlink" title="枚举索引集合"></a>枚举索引集合</h1><figure class="highlight objc"><figcaption><span>枚举集合</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)enumerateIndexesUsingBlock:(<span class="keyword">void</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))block <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br><span class="line">- (<span class="keyword">void</span>)enumerateIndexesWithOptions:(<span class="built_in">NSEnumerationOptions</span>)opts usingBlock:(<span class="keyword">void</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))block <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br><span class="line">- (<span class="keyword">void</span>)enumerateIndexesInRange:(<span class="built_in">NSRange</span>)range options:(<span class="built_in">NSEnumerationOptions</span>)opts usingBlock:(<span class="keyword">void</span> (<span class="built_in">NS_NOESCAPE</span> ^)(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop))block <span class="built_in">NS_AVAILABLE</span>(<span class="number">10</span>_6, <span class="number">4</span>_0);</span><br></pre></td></tr></table></figure>
<h1 id="可变集合的操作"><a href="#可变集合的操作" class="headerlink" title="可变集合的操作"></a>可变集合的操作</h1><h2 id="增加／删除一个索引集合"><a href="#增加／删除一个索引集合" class="headerlink" title="增加／删除一个索引集合"></a>增加／删除一个索引集合</h2><figure class="highlight objc"><figcaption><span>增加／删除一个索引集合</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)addIndexes:(<span class="built_in">NSIndexSet</span> *)indexSet;</span><br><span class="line">- (<span class="keyword">void</span>)removeIndexes:(<span class="built_in">NSIndexSet</span> *)indexSet;</span><br><span class="line">- (<span class="keyword">void</span>)removeAllIndexes;</span><br></pre></td></tr></table></figure>
<h2 id="增加／删除单个索引"><a href="#增加／删除单个索引" class="headerlink" title="增加／删除单个索引"></a>增加／删除单个索引</h2><figure class="highlight objc"><figcaption><span>增加／删除单个索引</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)addIndex:(<span class="built_in">NSUInteger</span>)value;</span><br><span class="line">- (<span class="keyword">void</span>)removeIndex:(<span class="built_in">NSUInteger</span>)value;</span><br></pre></td></tr></table></figure>
<h2 id="增加／删除一个子范围"><a href="#增加／删除一个子范围" class="headerlink" title="增加／删除一个子范围"></a>增加／删除一个子范围</h2><figure class="highlight objc"><figcaption><span>增加／删除一个子范围</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)addIndexesInRange:(<span class="built_in">NSRange</span>)range;</span><br><span class="line">- (<span class="keyword">void</span>)removeIndexesInRange:(<span class="built_in">NSRange</span>)range;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/06/29/Protocol/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/06/29/Protocol/" itemprop="url">Protocol的使用及相关事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-29T11:34:46+08:00">
                2017-06-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在iOS开发中，Protocol是一种经常用到的设计模式，苹果的系统框架中也普遍用到了这种方式，比如UITableView中的<uitableviewdelegate>，以及<nscopying>、<nsobject>这样的协议。我想大家也都自定义过协议，一般都用于回调，或者数据传递. 接下来我们来了解下协议使用及相关事项。</nsobject></nscopying></uitableviewdelegate></p>
<h1 id="什么是协议"><a href="#什么是协议" class="headerlink" title="什么是协议"></a>什么是协议</h1><p>苹果官方给出如下的定义</p>
<blockquote>
<p>A protocol declares a programmatic interface that any class may choose to implement. Protocols make it possible for two classes distantly related by inheritance to communicate with each other to accomplish a certain goal. They thus offer an alternative to subclassing. Any class that can provide behavior useful to other classes may declare a programmatic interface for vending that behavior anonymously. Any other class may choose to adopt the protocol and implement one or more of its methods, thereby making use of the behavior. The class that declares a protocol is expected to call the methods in the protocol if they are implemented by the protocol adopter.<br>   <img src="/2017/06/29/Protocol/protocol_2x.png" title="Protocol"></p>
</blockquote>
<ul>
<li>正式协议与非正式协议<blockquote>
<p>There are two varieties of protocol, formal and informal:</p>
<ul>
<li>A formal protocol declares a list of methods that client classes are expected to implement. Formal protocols have their own declaration, adoption, and type-checking syntax. You can designate methods whose implementation is required or optional with the @required and @optional keywords. Subclasses inherit formal protocols adopted by their ancestors. A formal protocol can also adopt other protocols.<br>Formal protocols are an extension to the Objective-C language.</li>
<li>An informal protocol is a category on NSObject, which implicitly makes almost all objects adopters of the protocol. (A category is a language feature that enables you to add methods to a class without subclassing it.) Implementation of the methods in an informal protocol is optional. Before invoking a method, the calling object checks to see whether the target object implements it. Until optional protocol methods were introduced in Objective-C 2.0, informal protocols were essential to the way Foundation and AppKit classes implemented delegation.</li>
</ul>
</blockquote>
</li>
</ul>
<h1 id="协议的定义"><a href="#协议的定义" class="headerlink" title="协议的定义"></a>协议的定义</h1><ol>
<li><p>协方式的定义</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">Protocolname</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"><span class="keyword">@required</span></span><br><span class="line"><span class="comment">//一系列必选方法</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line"><span class="comment">//一系列可选方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//属性的声明</span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>协议里可以定义哪些东西：</p>
<blockquote>
<p>Protocols can include declarations for both instance methods and class methods, as well as properties.</p>
</blockquote>
<p>协议可以定义实例方法，类方法以及属性  </p>
</li>
<li><p>协议的继承  </p>
<blockquote>
<p>In the same way that an Objective-C class can inherit from a superclass, you can also specify that one protocol conforms to another.<br>It’s best practice to define your protocols to conform to the <strong>NSObject</strong> protocol (some of the <strong>NSObject</strong> behavior is split from its class interface into a separate protocol; the <strong>NSObject</strong> class adopts the <strong>NSObject</strong> protocol)</p>
</blockquote>
<p> 协议默认继承 <strong><em>&lt; NSObject &gt;</em></strong> 协议 ,你也可以指定一个其他协议进行继承</p>
</li>
<li><p>协议中定义属性<br> 协议里是支持定义属性的，但这只是定义了getter和setter方法，并没有具体的实现。所以当协议属性修饰符为@required时，如果遵守协议的类不实现这两方法，编译器会报出警告。最简单的方式是加上属性同步语句@synthesize propertyName;</p>
</li>
</ol>
<h1 id="协议的关键字"><a href="#协议的关键字" class="headerlink" title="协议的关键字"></a>协议的关键字</h1><ol>
<li><p>@required</p>
<blockquote>
<p>By default, all methods declared in a protocol are required methods. This means that any class that conforms to the protocol must implement those methods.</p>
</blockquote>
<p> @required修改的协议方法为必要方法，任何遵守该协议的类都必须实现这些方法</p>
</li>
<li><p>@optional</p>
<blockquote>
<p>It’s also possible to specify optional methods in a protocol. These are methods that a class can implement only if it needs to. </p>
</blockquote>
<p> @optional修饰的方法为可选方法，这些方法可以根据类的需要进行实现。</p>
</li>
</ol>
<h1 id="遵守协议"><a href="#遵守协议" class="headerlink" title="遵守协议"></a>遵守协议</h1><ol>
<li><p>设置代理属性</p>
 <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Object</span> : <span class="title">NSObject</span>&lt;<span class="title">Protocolname</span>&gt;</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">weak</span>)<span class="keyword">id</span>&lt;Protocolname&gt;delegate;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>&lt;协议列表&gt;<br>  若需要遵守多个协议，将协议用逗号隔开，并放在尖括号&lt;&gt;中 </li>
<li>添加代理属性<br>  代理属性通常用<strong>weak</strong>修饰，避免强引用</li>
</ul>
</li>
<li>实现协议方法<ul>
<li>@required修饰的协议方法，需要在.m文件中对这些方法进行实现 </li>
<li>@optional修饰的协议方法，可根据需要在.m文件中进行实现    </li>
</ul>
</li>
</ol>
<h1 id="检测对象是否遵守协议"><a href="#检测对象是否遵守协议" class="headerlink" title="检测对象是否遵守协议"></a>检测对象是否遵守协议</h1><ol>
<li><p>检测某对象是否遵守该协议<br>使用 <code>- (BOOL)conformsToProtocol:(Protocol *)aProtocol;</code>进行检测</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[delegate conformsToProtocol:<span class="class"><span class="keyword">@protocol</span>(<span class="title">Protocolname</span>)];</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>检测对象是否实现了某方法<br>使用 <code>- (BOOL)respondsToSelector:(SEL)aSelector;</code>进行检测</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[delegate respondsToSelector:<span class="keyword">@selector</span>(methodname)];</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/06/27/pip安装使用详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/06/27/pip安装使用详解/" itemprop="url">pip安装使用详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-27T14:54:34+08:00">
                2017-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本节详细介绍pip的安装以及使用方法</p>
<h1 id="pip-下载-安装-更新"><a href="#pip-下载-安装-更新" class="headerlink" title="pip 下载/安装/更新"></a>pip 下载/安装/更新</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><ul>
<li>从python官网下载 <a href="https://pypi.python.org/pypi/pip" target="_blank" rel="noopener">pip</a></li>
<li>使用工具下载<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget 'https://pypi.python.org/packages/11/b6/abcb<span class="number">525026</span>a4be042b486df<span class="number">4390</span>5d<span class="number">6893</span>fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz#md5=35f01da<span class="number">3300971949</span>7f01a4ba69d63c9'</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="pip-安装"><a href="#pip-安装" class="headerlink" title="pip 安装"></a>pip 安装</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-xzvf</span> <span class="selector-tag">pip-9</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> # 解压</span><br><span class="line"><span class="selector-tag">cd</span> <span class="selector-tag">pip-9</span><span class="selector-class">.0</span><span class="selector-class">.1</span> # 切换至目录</span><br><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">python</span> <span class="selector-tag">setup</span><span class="selector-class">.py</span> <span class="selector-tag">install</span>   # 安装</span><br></pre></td></tr></table></figure>
<h2 id="pip-更新"><a href="#pip-更新" class="headerlink" title="pip 更新"></a>pip 更新</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -U pip</span><br></pre></td></tr></table></figure>
<h1 id="pip-使用详解"><a href="#pip-使用详解" class="headerlink" title="pip 使用详解"></a>pip 使用详解</h1><h2 id="pip-安装包"><a href="#pip-安装包" class="headerlink" title="pip 安装包"></a>pip 安装包</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> packagename</span><br></pre></td></tr></table></figure>
<h2 id="查看已安装的包详情"><a href="#查看已安装的包详情" class="headerlink" title="查看已安装的包详情"></a>查看已安装的包详情</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pip show  packagename</span></span><br></pre></td></tr></table></figure>

<h2 id="pip-列出所有安装的包"><a href="#pip-列出所有安装的包" class="headerlink" title="pip 列出所有安装的包"></a>pip 列出所有安装的包</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="built_in">list</span> <span class="comment">--format=columns</span></span><br></pre></td></tr></table></figure>

<h2 id="pip-升级包"><a href="#pip-升级包" class="headerlink" title="pip 升级包"></a>pip 升级包</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -U  packagename</span><br></pre></td></tr></table></figure>
<h2 id="pip-卸载包"><a href="#pip-卸载包" class="headerlink" title="pip 卸载包"></a>pip 卸载包</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pip uninstall packagename</span></span><br></pre></td></tr></table></figure>
<h2 id="检查需要更新的包"><a href="#检查需要更新的包" class="headerlink" title="检查需要更新的包"></a>检查需要更新的包</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="built_in">list</span> <span class="comment">--outdate --format=columns</span></span><br></pre></td></tr></table></figure>

<h1 id="pip参数解释"><a href="#pip参数解释" class="headerlink" title="pip参数解释"></a>pip参数解释</h1><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> pip --<span class="keyword">help</span></span><br><span class="line"> </span><br><span class="line">Usage:   </span><br><span class="line">  pip <span class="symbol">&lt;command&gt;</span> [<span class="keyword">options</span>]</span><br><span class="line"> </span><br><span class="line">Command<span class="variable">s:</span></span><br><span class="line">  install                     安装包.</span><br><span class="line">  uninstall                   卸载包.</span><br><span class="line">  freeze                      按着一定格式输出已安装包列表</span><br><span class="line">  <span class="keyword">list</span>                        列出已安装包.</span><br><span class="line">  show                        显示包详细信息.</span><br><span class="line">  <span class="built_in">search</span>                      搜索包，类似yum里的<span class="built_in">search</span>.</span><br><span class="line">  wheel                       Build wheels from your requirements.</span><br><span class="line">  zip                         不推荐. Zip individual packages.</span><br><span class="line">  unzip                       不推荐. Unzip individual packages.</span><br><span class="line">  bundle                      不推荐. Create pybundles.</span><br><span class="line">  <span class="keyword">help</span>                        当前帮助.</span><br><span class="line"> </span><br><span class="line">General Option<span class="variable">s:</span></span><br><span class="line">  -h, --<span class="keyword">help</span>                  显示帮助.</span><br><span class="line">  -v, --<span class="keyword">verbose</span>               更多的输出，最多可以使用<span class="number">3</span>次</span><br><span class="line">  -V, --<span class="keyword">version</span>               现实版本信息然后退出.</span><br><span class="line">  -q, --quiet                 最少的输出.</span><br><span class="line">  --<span class="built_in">log</span>-<span class="keyword">file</span> <span class="symbol">&lt;path&gt;</span>           覆盖的方式记录<span class="keyword">verbose</span>错误日志，默认文件：/root/.pip/pip.<span class="built_in">log</span></span><br><span class="line">  --<span class="built_in">log</span> <span class="symbol">&lt;path&gt;</span>                不覆盖记录<span class="keyword">verbose</span>输出的日志.</span><br><span class="line">  --proxy <span class="symbol">&lt;proxy&gt;</span>             Specify <span class="keyword">a</span> proxy in the form [user:passwd@]proxy.server:port.</span><br><span class="line">  --timeout <span class="symbol">&lt;sec&gt;</span>             连接超时时间 (默认<span class="number">15</span>秒).</span><br><span class="line">  --<span class="built_in">exists</span>-action <span class="symbol">&lt;action&gt;</span>    Default action when <span class="keyword">a</span> path already exist<span class="variable">s:</span> (s)witch, (i)gnore, (<span class="keyword">w</span>)ipe, (<span class="keyword">b</span>)ackup.</span><br><span class="line">  --cert <span class="symbol">&lt;path&gt;</span>               证书.</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yuanph.org../../2017/06/22/真机调试出错问题集/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="志鹏">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="志鹏的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2017/06/22/真机调试出错问题集/" itemprop="url">真机调试出错问题集</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-22T11:59:10+08:00">
                2017-06-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/Xcode8/" itemprop="url" rel="index">
                    <span itemprop="name">Xcode8</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="证书问题"><a href="#证书问题" class="headerlink" title="证书问题"></a>证书问题</h1><ul>
<li>问题：<br>  在真机调试安装过程中出现  <code>process launch failed: failed to get the task for XXXX</code>错误信息 <img src="/2017/06/22/真机调试出错问题集/debug_error.png" title="安装出错信息"></li>
<li>问题原因：<br>  使用的证书不对，  <code>project</code>和<code>targets</code>的 <code>Signing(Debug)</code>证书都必须是开发证书，<code>ADHOC</code>的证书会出现此问题。</li>
<li>解决方法：<br>  <code>project</code>和<code>targets</code>的<code>Signing(Debug)</code>证书使用开发证书</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../../index.html"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../index.html">1</a><span class="page-number current">2</span><a class="page-number" href="../3/">3</a><span class="space">&hellip;</span><a class="page-number" href="../12/">12</a><a class="extend next" rel="next" href="../3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">志鹏</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="../../archives/">
              
                  <span class="site-state-item-count">113</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">志鹏</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="../../js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="../../js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.3"></script>



  


  








  












  





  

  

  

  
  

  

  

  

</body>
</html>
