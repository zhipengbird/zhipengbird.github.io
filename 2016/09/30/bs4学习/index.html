
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>bs4学习 | 志鹏的技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="志鹏">
    

    
    <meta name="description" content="Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.">
<meta property="og:type" content="article">
<meta property="og:title" content="bs4学习">
<meta property="og:url" content="http://yuanph.org/2016/09/30/bs4学习/index.html">
<meta property="og:site_name" content="志鹏的技术博客">
<meta property="og:description" content="Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-03-31T15:08:14.153Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="bs4学习">
<meta name="twitter:description" content="Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.">

    
    <link rel="alternative" href="atom.xml" title="志鹏的技术博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="../../../../css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="志鹏的技术博客">志鹏的技术博客</a></h1>
				<h2 class="blog-motto">记录成长的点滴</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">简介</a></li>
					
					<li>
 					
						<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" class="st-default-search-input" maxlength="20" placeholder="Search" />
						</form>
					
					</li>
				</ul>
			</nav>
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/09/30/bs4学习/" title="bs4学习" itemprop="url">bs4学习</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="志鹏" target="_blank" itemprop="author">志鹏</a>
		
  <p class="article-time">
    <time datetime="2016-09-30T06:21:59.000Z" itemprop="datePublished"> Published 2016-09-30</time>
    <span id="busuanzi_container_page_pv">
    总阅读<span id="busuanzi_value_page_pv"></span>次
</span>
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#使用"><span class="toc-number">1.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#对象的种类"><span class="toc-number">1.1.</span> <span class="toc-text">对象的种类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tag"><span class="toc-number">1.2.</span> <span class="toc-text">Tag</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tag中最重要的属性-name和attributes"><span class="toc-number">1.2.1.</span> <span class="toc-text">tag中最重要的属性: name和attributes</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#name"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Attributes"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">Attributes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多值属性"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">多值属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#可以遍历的字符串"><span class="toc-number">1.2.2.</span> <span class="toc-text">可以遍历的字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注释及特殊字符串"><span class="toc-number">1.2.3.</span> <span class="toc-text">注释及特殊字符串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#遍历文档树"><span class="toc-number">1.3.</span> <span class="toc-text">遍历文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#子节点"><span class="toc-number">1.3.1.</span> <span class="toc-text">子节点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#contents-和-children"><span class="toc-number">1.4.</span> <span class="toc-text">.contents 和 .children</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#descendants"><span class="toc-number">1.5.</span> <span class="toc-text">.descendants</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strings-和-stripped-strings"><span class="toc-number">1.6.</span> <span class="toc-text">.strings 和 stripped_strings</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#父节点"><span class="toc-number">1.7.</span> <span class="toc-text">父节点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#parent"><span class="toc-number">1.7.1.</span> <span class="toc-text">.parent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parents"><span class="toc-number">1.7.2.</span> <span class="toc-text">.parents</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#兄弟节点"><span class="toc-number">1.7.3.</span> <span class="toc-text">兄弟节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#next-siblings-和-previous-siblings"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">.next_siblings 和 .previous_siblings</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#next-element-和-previous-element"><span class="toc-number">1.7.4.</span> <span class="toc-text">.next_element 和 .previous_element</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#next-elements-和-previous-elements"><span class="toc-number">1.7.5.</span> <span class="toc-text">.next_elements 和 .previous_elements</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#搜索文档树"><span class="toc-number">1.8.</span> <span class="toc-text">搜索文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#find-all"><span class="toc-number">1.8.1.</span> <span class="toc-text">find_all()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CSS选择器"><span class="toc-number">1.9.</span> <span class="toc-text">CSS选择器</span></a></li></ol></li></ol>
		
		</div>
		
		<blockquote>
<p>Beautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.</p>
</blockquote>
<a id="more"></a>
<p>#bs4 的安装<br>使用系统软件包管理工具brew/pip来安装<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install beautifulsoup4</span><br><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure></p>
<p>安装解析器<br>Beautiful Soup支持Python标准库中的HTML解析器,还支持一些第三方的解析器,其中一个是 lxml .根据操作系统不同,可以选择下列方法来安装lxml:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install Python-lxml</span><br><span class="line"></span><br><span class="line">$ easy_install lxml</span><br><span class="line"></span><br><span class="line">$ pip install lxml</span><br></pre></td></tr></table></figure>
<p>另一个可供选择的解析器是纯Python实现的 html5lib , html5lib的解析方式与浏览器相同,可以选择下列方法来安装html5lib:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ apt-get install Python-html5lib</span><br><span class="line"></span><br><span class="line">$ easy_install html5lib</span><br><span class="line"></span><br><span class="line">$ pip install html5lib</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:left">解析器</th>
<th style="text-align:left">使用方法</th>
<th style="text-align:left">优势</th>
<th style="text-align:left">劣势</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Python标准库</td>
<td style="text-align:left">BeautifulSoup(markup, “html.parser”)</td>
<td style="text-align:left">Python的内置标准库    执行速度适中  文档容错能力强</td>
<td style="text-align:left">Python 2.7.3 or 3.2.2)前 的版本中文档容错能力差</td>
</tr>
<tr>
<td style="text-align:left">lxml HTML 解析器</td>
<td style="text-align:left">BeautifulSoup(markup, “lxml”)</td>
<td style="text-align:left">速度快    文档容错能力强</td>
<td style="text-align:left">需要安装C语言库</td>
</tr>
<tr>
<td style="text-align:left">lxml XML 解析器</td>
<td style="text-align:left">BeautifulSoup(markup, [“lxml-xml”])  BeautifulSoup(markup, “xml”)</td>
<td style="text-align:left">速度快  唯一支持XML的解析器</td>
<td style="text-align:left">需要安装C语言库</td>
</tr>
<tr>
<td style="text-align:left">html5lib</td>
<td style="text-align:left">BeautifulSoup(markup, “html5lib”)</td>
<td style="text-align:left">最好的容错性  以浏览器的方式解析文档  生成HTML5格式的文档</td>
<td style="text-align:left">速度慢  不依赖外部扩展</td>
</tr>
</tbody>
</table>
<p><strong>推荐使用lxml作为解析器,因为效率更高. 在Python2.7.3之前的版本和Python3中3.2.2之前的版本,必须安装lxml或html5lib, 因为那些Python版本的标准库中内置的HTML解析方法不够稳定.</strong></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>将一段文档传入BeautifulSoup 的构造方法,就能得到一个文档的对象, 可以传入一段字符串或一个文件句柄.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(open(<span class="string">"index.html"</span>))</span><br><span class="line">soup = BeautifulSoup(<span class="string">"&lt;html&gt;data&lt;/html&gt;"</span>)</span><br></pre></td></tr></table></figure></p>
<p>首先,文档被转换成Unicode,并且HTML的实例都被转换成Unicode编码<br>然后,Beautiful Soup选择最合适的解析器来解析这段文档,如果手动指定解析器那么Beautiful Soup会选择指定的解析器来解析文档</p>
<p>示例内容：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">html_doc = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure></p>
<h2 id="对象的种类"><a href="#对象的种类" class="headerlink" title="对象的种类"></a>对象的种类</h2><p>Beautiful Soup将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种: <code>Tag</code> , <code>NavigableString</code> , <code>BeautifulSoup</code> , <code>Comment</code> .</p>
<h2 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h2><p><strong>Tag 对象与XML或HTML原生文档中的tag相同:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">soup =BeautifulSoup(<span class="string">'&lt;b class="boldest"&gt;Extremely bold&lt;/b&gt;'</span>,<span class="string">"lxml"</span>)</span><br><span class="line">tag = soup.b</span><br><span class="line">print(type(tag)) <span class="comment"># &lt;class 'bs4.element.Tag'&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="tag中最重要的属性-name和attributes"><a href="#tag中最重要的属性-name和attributes" class="headerlink" title="tag中最重要的属性: name和attributes"></a>tag中最重要的属性: name和attributes</h3><h4 id="name"><a href="#name" class="headerlink" title="name"></a>name</h4><p>每个tag都有自己的名字,通过 .name 来获取:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(tag.name)<span class="comment"># b</span></span><br></pre></td></tr></table></figure></p>
<p>如果改变了tag的name,那将影响所有通过当前Beautiful Soup对象生成的HTML文档:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tag.name=<span class="string">"yph"</span></span><br><span class="line">print(tag)</span><br><span class="line"><span class="comment"># &lt;yph class="boldest"&gt;Extremely bold&lt;/yph&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h4><p>一个tag可能有很多个属性. tag <b class="boldest"> 有一个 “class” 的属性,值为 “boldest” . tag的属性的操作方法与字典相同:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tag[<span class="string">'class'</span>]</span><br><span class="line"><span class="comment"># u'boldest'</span></span><br></pre></td></tr></table></figure></b></p>
<p>也可以直接”点”取属性, 比如: .attrs :</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tag.attrs</span><br><span class="line"><span class="comment"># &#123;u'class': u'boldest'&#125;</span></span><br></pre></td></tr></table></figure>
<p>Tag的属性可以被添加,删除或修改. 再说一次, tag的属性操作方法与字典一样<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tag[<span class="string">'class'</span>]=<span class="string">'tstclass'</span></span><br><span class="line"><span class="comment">#添加</span></span><br><span class="line">tag[<span class="string">'id'</span>]=<span class="string">'yph'</span></span><br><span class="line">print(tag) <span class="comment">#&lt;yph class="tstclass" id="yph"&gt;Extremely bold&lt;/yph&gt;</span></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line"><span class="keyword">del</span>  tag[<span class="string">'class'</span>]</span><br><span class="line"><span class="keyword">del</span>  tag[<span class="string">'id'</span>]</span><br><span class="line">print(tag) <span class="comment">#&lt;yph&gt;Extremely bold&lt;/yph&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="多值属性"><a href="#多值属性" class="headerlink" title="多值属性"></a>多值属性</h4><p>HTML 4定义了一系列可以包含多个值的属性.在HTML5中移除了一些,却增加更多.最常见的多值的属性是 <code>class</code> (一个tag可以有多个CSS的class). 还有一些属性 <code>rel</code> , <code>rev</code> , <code>accept-charset</code> , <code>headers</code> , <code>accesskey</code> . 在Beautiful Soup中多值属性的返回类型是<code>list</code>:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">css_soup=BeautifulSoup(<span class="string">'&lt;p class="body strikeout"&gt;&lt;/p&gt;'</span>,<span class="string">'lxml'</span>)</span><br><span class="line">print(css_soup.p[<span class="string">'class'</span>]) <span class="comment">#['body', 'strikeout']</span></span><br><span class="line"></span><br><span class="line">css_soup=BeautifulSoup(<span class="string">'&lt;p class="body"&gt;&lt;/p&gt;'</span>,<span class="string">'lxml'</span>)</span><br><span class="line">print(css_soup.p[<span class="string">'class'</span>]) <span class="comment">#['body']</span></span><br></pre></td></tr></table></figure></p>
<p> 如果某个属性看起来好像有多个值,但在任何版本的HTML定义中都没有被定义为多值属性,那么Beautiful Soup会将这个属性作为字符串返回<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id_soup=BeautifulSoup(<span class="string">'&lt;p id="my id"&gt;&lt;/p&gt;'</span>,<span class="string">'lxml'</span>)</span><br><span class="line">print(id_soup.p[<span class="string">'id'</span>]) <span class="comment"># my id</span></span><br></pre></td></tr></table></figure></p>
<p>将tag转换成字符串时,多值属性会合并为一个值<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rel_soup = BeautifulSoup(<span class="string">'&lt;p&gt;Back to the &lt;a rel="index"&gt;homepage&lt;/a&gt;&lt;/p&gt;'</span>,<span class="string">'lxml'</span>)</span><br><span class="line">print(rel_soup.a[<span class="string">'rel'</span>])  <span class="comment">#['index']</span></span><br><span class="line">rel_soup.a[<span class="string">'rel'</span>]=[<span class="string">'index'</span>,<span class="string">'contents'</span>]</span><br><span class="line">print(rel_soup.p) <span class="comment">#&lt;p&gt;Back to the &lt;a rel="index contents"&gt;homepage&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line">print(rel_soup.a[<span class="string">'rel'</span>]) <span class="comment">#['index', 'contents']</span></span><br></pre></td></tr></table></figure></p>
<p><strong>如果转换的文档是XML格式,那么tag中不包含多值属性</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xml_soup = BeautifulSoup(<span class="string">'&lt;p class="body strikeout"&gt;&lt;/p&gt;'</span>, <span class="string">'xml'</span>)</span><br><span class="line">print(xml_soup.p[<span class="string">'class'</span>]) <span class="comment">#body strikeout</span></span><br></pre></td></tr></table></figure></p>
<h3 id="可以遍历的字符串"><a href="#可以遍历的字符串" class="headerlink" title="可以遍历的字符串"></a>可以遍历的字符串</h3><p>字符串常被包含在tag内.Beautiful Soup用 NavigableString 类来包装tag中的字符串:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">soup =BeautifulSoup(<span class="string">'&lt;b class="boldest"&gt;Extremely bold&lt;/b&gt;'</span>,<span class="string">"lxml"</span>)</span><br><span class="line">tag =soup.b</span><br><span class="line">print(tag.string) <span class="comment">#Extremely bold</span></span><br><span class="line">print(type(tag.string)) <span class="comment">#&lt;class 'bs4.element.NavigableString'&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="注释及特殊字符串"><a href="#注释及特殊字符串" class="headerlink" title="注释及特殊字符串"></a>注释及特殊字符串</h3><p>Tag , NavigableString , BeautifulSoup 几乎覆盖了html和xml中的所有内容,但是还有一些特殊对象.容易让人担心的内容是文档的注释部分:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">markup = <span class="string">"&lt;b&gt;&lt;!--Hey, buddy. Want to buy a used parser?--&gt;&lt;/b&gt;"</span></span><br><span class="line">soup=BeautifulSoup(markup,<span class="string">'html.parser'</span>)</span><br><span class="line">comment=soup.b.string</span><br><span class="line"><span class="comment"># Comment 对象是一个特殊类型的 NavigableString 对象:</span></span><br><span class="line">print(comment) <span class="comment">#Hey, buddy. Want to buy a used parser?</span></span><br><span class="line">print(type(comment)) <span class="comment">#&lt;class 'bs4.element.Comment'&gt;</span></span><br><span class="line">print(soup.b.prettify())</span><br></pre></td></tr></table></figure>
<h2 id="遍历文档树"><a href="#遍历文档树" class="headerlink" title="遍历文档树"></a>遍历文档树</h2><h3 id="子节点"><a href="#子节点" class="headerlink" title="子节点"></a>子节点</h3><p>一个Tag可能包含多个字符串或其它的Tag,这些都是这个Tag的子节点.Beautiful Soup提供了许多操作和遍历子节点的属性.<br><strong>注意: Beautiful Soup中字符串节点不支持这些属性,因为字符串没有子节点</strong></p>
<p>tag的名字</p>
<p>操作文档树最简单的方法就是告诉它你想获取的tag的name.如果想获取 <head> 标签,只要用 soup.head :<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">soup.head</span><br><span class="line"><span class="comment"># &lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line">soup.title</span><br><span class="line"><span class="comment"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure></head></p>
<p>通过点取属性的方式只能获得当前名字的第一个tag:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.a</span><br><span class="line"><span class="comment"># &lt;a class="sister" href="http://example.com/elsie" id="link1"&gt;Elsie&lt;/a&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="contents-和-children"><a href="#contents-和-children" class="headerlink" title=".contents 和 .children"></a>.contents 和 .children</h2><p>tag的 .contents 属性可以将tag的子节点以列表的方式输出:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">head_tag= soup.head</span><br><span class="line">print(head_tag) <span class="comment">#&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line">print(head_tag.contents) <span class="comment">#&lt;title&gt;The Dormouse's story&lt;/title&gt;] 返回一个列表</span></span><br><span class="line">title_tag= head_tag.contents[<span class="number">0</span>]</span><br><span class="line">print(title_tag) <span class="comment">#&lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br><span class="line">print(title_tag.contents)</span><br></pre></td></tr></table></figure></p>
<p>BeautifulSoup 对象本身一定会包含子节点,也就是说<html>标签也是 BeautifulSoup 对象的子节点:<br>字符串没有 .contents 属性,因为字符串没有子节点:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text = title_tag.contents[<span class="number">0</span>]</span><br><span class="line">text.contents</span><br><span class="line"><span class="comment"># AttributeError: 'NavigableString' object has no attribute 'contents'</span></span><br></pre></td></tr></table></figure></html></p>
<p>通过tag的 .children 生成器,可以对tag的子节点进行循环:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> title_tag.children:</span><br><span class="line">    print(child)</span><br><span class="line">    <span class="comment"># The Dormouse's story</span></span><br></pre></td></tr></table></figure></p>
<h2 id="descendants"><a href="#descendants" class="headerlink" title=".descendants"></a>.descendants</h2><p>  .contents  和.children 属性仅包含tag的直接子节点.例如 , &lt; head &gt; 标签只有一个直接子节点 &lt; title &gt;<br>  .descendants 属性可以对所有tag的子孙节点进行递归循环  :<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> head_tag.descendants:</span><br><span class="line">    print(child)</span><br><span class="line"></span><br><span class="line">print(soup.html.head.title.string)</span><br></pre></td></tr></table></figure></p>
<h2 id="strings-和-stripped-strings"><a href="#strings-和-stripped-strings" class="headerlink" title=".strings 和 stripped_strings"></a>.strings 和 stripped_strings</h2><p>如果tag中包含多个字符串  ,可以使用 .strings 来循环获取:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> string <span class="keyword">in</span> soup.strings:</span><br><span class="line">    print(string)</span><br></pre></td></tr></table></figure></p>
<p> 输出的字符串中可能包含了很多空格或空行,使用 .stripped_strings 可以去除多余空白内容:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'**************************'</span>)</span><br><span class="line"><span class="keyword">for</span> string <span class="keyword">in</span> soup.stripped_strings:</span><br><span class="line">    print(string)</span><br></pre></td></tr></table></figure></p>
<h2 id="父节点"><a href="#父节点" class="headerlink" title="父节点"></a>父节点</h2><p>继续分析文档树,每个tag或字符串都有父节点:被包含在某个tag中</p>
<h3 id="parent"><a href="#parent" class="headerlink" title=".parent"></a>.parent</h3><p> 通过 .parent 属性来获取某个元素的父节点.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">title_tag= soup.title</span><br><span class="line">print(title_tag.parent) <span class="comment">#&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line">print(title_tag.string.parent) <span class="comment">#&lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="parents"><a href="#parents" class="headerlink" title=".parents"></a>.parents</h3><p> 通过元素的 .parents 属性可以递归得到元素的所有父辈节点,<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">link= soup.a</span><br><span class="line">print(link)</span><br><span class="line"><span class="keyword">for</span> parent <span class="keyword">in</span> link.parents:</span><br><span class="line">    <span class="keyword">if</span> parent <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        print(parent)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(parent.name)</span><br></pre></td></tr></table></figure></p>
<h3 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sibling_soup= BeautifulSoup(<span class="string">"&lt;a&gt;&lt;b&gt;text1&lt;/b&gt;&lt;c&gt;text2&lt;/c&gt;&lt;/b&gt;&lt;/a&gt;"</span>,<span class="string">'html.parser'</span>)</span><br><span class="line">print(sibling_soup.prettify())</span><br><span class="line"></span><br><span class="line">print(sibling_soup.b.next_sibling)</span><br><span class="line">print(sibling_soup.c.previous_sibling)</span><br></pre></td></tr></table></figure>
<h4 id="next-siblings-和-previous-siblings"><a href="#next-siblings-和-previous-siblings" class="headerlink" title=".next_siblings 和 .previous_siblings"></a>.next_siblings 和 .previous_siblings</h4><p> 通过 .next_siblings 和 .previous_siblings 属性可以对当前节点的兄弟节点迭代输出:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line"><span class="keyword">for</span> sibling <span class="keyword">in</span> soup.a.next_siblings:</span><br><span class="line">    print(repr(sibling))</span><br><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line"><span class="keyword">for</span> sibling <span class="keyword">in</span> soup.find(id=<span class="string">"link3"</span>).previous_siblings:</span><br><span class="line">    print(repr(sibling))</span><br></pre></td></tr></table></figure>
<h3 id="next-element-和-previous-element"><a href="#next-element-和-previous-element" class="headerlink" title=".next_element 和 .previous_element"></a>.next_element 和 .previous_element</h3><p> .next_element 属性指向解析过程中下一个被解析的对象(字符串或tag),结果可能与 .next_sibling 相同,但通常是不一样的.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">last_a_tag= soup.find(<span class="string">'a'</span>,id=<span class="string">'link3'</span>)</span><br><span class="line">print(last_a_tag)</span><br><span class="line">print(last_a_tag.next_element)</span><br><span class="line">print(last_a_tag.previous_element)</span><br><span class="line">print(last_a_tag.previous_element.next_element)</span><br></pre></td></tr></table></figure>
<h3 id="next-elements-和-previous-elements"><a href="#next-elements-和-previous-elements" class="headerlink" title=".next_elements 和 .previous_elements"></a>.next_elements 和 .previous_elements</h3><p> 通过 .next_elements 和 .previous_elements 的迭代器就可以向前或向后访问文档的解析内容,就好像文档正在被解析一样:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> last_a_tag.next_elements:</span><br><span class="line">    print(repr(element))</span><br></pre></td></tr></table></figure></p>
<h2 id="搜索文档树"><a href="#搜索文档树" class="headerlink" title="搜索文档树"></a>搜索文档树</h2><p> find() 和 find_all() .其它方法的参数和用法类似,请读者举一反三.</p>
<h3 id="find-all"><a href="#find-all" class="headerlink" title="find_all()"></a>find_all()</h3><p><code>find_all( name , attrs , recursive , string , **kwargs )</code><br>find_all() 方法搜索当前tag的所有tag子节点,并判断是否符合过滤器的条件.</p>
<ul>
<li><p>name参数<br>name 参数可以查找所有名字为 name 的tag,字符串对象会被自动忽略掉<br>搜索 name 参数的值可以使任一类型的 过滤器 ,字符窜,正则表达式,列表,方法或是 True .</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.find_all(<span class="string">'title'</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>keyword 参数<br>如果一个指定名字的参数不是搜索内置的参数名,搜索时会把该参数当作指定名字tag的属性来搜索,如果包含一个名字为 id 的参数,Beautiful Soup会搜索每个tag的”id”属性.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.find_all(id=<span class="string">'link2'</span>))</span><br></pre></td></tr></table></figure>
<p> 如果传入 href 参数,Beautiful Soup会搜索每个tag的”href”属性:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.find_all(href=re.compile(<span class="string">'elsie'</span>)))</span><br></pre></td></tr></table></figure>
<p>搜索指定名字的属性时可以使用的参数值包括 字符串 , 正则表达式 , 列表, True .</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(soup.find_all(id=<span class="keyword">True</span>))</span><br><span class="line">print(soup.find_all(href=re.compile(<span class="string">'elsie'</span>),id=<span class="string">'link1'</span>))</span><br></pre></td></tr></table></figure>
<p>有些tag属性在搜索不能使用,比如HTML5中的 data-* 属性:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_soup = BeautifulSoup(<span class="string">'&lt;div data-foo="value"&gt;foo!&lt;/div&gt;'</span>,<span class="string">'html.parser'</span>)</span><br><span class="line"><span class="comment"># print(data_soup.find_all( data-foo="value"))</span></span><br><span class="line">print(data_soup.find_all(attrs=&#123;<span class="string">'data-foo'</span>:<span class="string">'value'</span>&#125;))</span><br></pre></td></tr></table></figure>
<ul>
<li><p>按CSS搜索</p>
<p>按照CSS类名搜索tag的功能非常实用,但标识CSS类名的关键字 class 在Python中是保留字,使用 class 做参数会导致语法错误.从Beautiful Soup的4.1.1版本开始,可以通过 class_ 参数搜索有指定CSS类名的tag:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line">res =soup.find_all(<span class="string">'a'</span>,class_=<span class="string">'sister'</span>)</span><br><span class="line"><span class="keyword">for</span> alinke  <span class="keyword">in</span> res :</span><br><span class="line">    print(alinke)</span><br></pre></td></tr></table></figure>
<p>class_ 参数同样接受不同类型的 过滤器 ,字符串,正则表达式,方法或 True</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">has_six_characters</span><span class="params">(css_class)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> css_class <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> len(css_class) == <span class="number">6</span></span><br><span class="line">print(soup.find_all(class_ =has_six_characters))</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>tag的 class 属性是 多值属性 .按照CSS类名搜索tag时,可以分别搜索tag中的每个CSS类名:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">css_soup = BeautifulSoup(<span class="string">'&lt;p class="body strikeout"&gt;&lt;/p&gt;'</span>)</span><br><span class="line">css_soup.find_all(<span class="string">"p"</span>, class_=<span class="string">"strikeout"</span>)</span><br><span class="line"><span class="comment"># [&lt;p class="body strikeout"&gt;&lt;/p&gt;]</span></span><br><span class="line"></span><br><span class="line">css_soup.find_all(<span class="string">"p"</span>, class_=<span class="string">"body"</span>)</span><br><span class="line"><span class="comment"># [&lt;p class="body strikeout"&gt;&lt;/p&gt;]</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>string 参数<br>通过 string 参数可以搜搜文档中的字符串内容.与 name 参数的可选值一样, string 参数接受 字符串 , 正则表达式 , 列表, True . 看例子:</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(string=<span class="string">"Elsie"</span>)</span><br><span class="line"><span class="comment"># [u'Elsie']</span></span><br><span class="line"></span><br><span class="line">soup.find_all(string=[<span class="string">"Tillie"</span>, <span class="string">"Elsie"</span>, <span class="string">"Lacie"</span>])</span><br><span class="line"><span class="comment"># [u'Elsie', u'Lacie', u'Tillie']</span></span><br><span class="line"></span><br><span class="line">soup.find_all(string=re.compile(<span class="string">"Dormouse"</span>))</span><br><span class="line">[<span class="string">u"The Dormouse's story"</span>, <span class="string">u"The Dormouse's story"</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_the_only_string_within_a_tag</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="string">""</span>Return <span class="keyword">True</span> <span class="keyword">if</span> this string <span class="keyword">is</span> the only child of its parent tag.<span class="string">""</span></span><br><span class="line">    <span class="keyword">return</span> (s == s.parent.string)</span><br><span class="line"></span><br><span class="line">soup.find_all(string=is_the_only_string_within_a_tag)</span><br><span class="line"><span class="comment"># [u"The Dormouse's story", u"The Dormouse's story", u'Elsie', u'Lacie', u'Tillie', u'...']</span></span><br></pre></td></tr></table></figure>
<p>虽然 string 参数用于搜索字符串,还可以与其它参数混合使用来过滤tag.Beautiful Soup会找到 .string 方法与 string 参数值相符的tag.下面代码用来搜索内容里面包含“Elsie”的<a>标签:</a></p>
<p>实例操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">html= <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;div id="pages"&gt;</span></span><br><span class="line"><span class="string">	&lt;a href="/fenlei/15.html"&gt;&amp;lt;&lt;/a&gt;&lt;a class="curr"&gt;1&lt;/a&gt;&lt;a href="/fenlei/15_2.html" target="_self"&gt;2&lt;/a&gt;&lt;a href="/fenlei/15_3.html" target="_self"&gt;3&lt;/a&gt;&lt;a href="/fenlei/15_4.html" target="_self"&gt;4&lt;/a&gt;&lt;a href="/fenlei/15_5.html" target="_self"&gt;5&lt;/a&gt;&lt;a href="/fenlei/15_6.html" target="_self"&gt;6&lt;/a&gt;&lt;a href="/fenlei/15_7.html" target="_self"&gt;7&lt;/a&gt;&lt;a href="/fenlei/15_8.html" target="_self"&gt;8&lt;/a&gt;&lt;a href="/fenlei/15_2.html"&gt;&amp;gt;&lt;/a&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">page_soup= BeautifulSoup(html,<span class="string">'html.parser'</span>)</span><br><span class="line">rs =page_soup.find_all(string=<span class="string">'&gt;'</span>)</span><br><span class="line">print(rs[<span class="number">0</span>].previous_element.string )</span><br><span class="line">print(page_soup.find(string=<span class="string">'&gt;'</span>).previous_element[<span class="string">'href'</span>])</span><br><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> page_soup.find(string =<span class="string">'&gt;'</span>).previous_element.previous_elements:</span><br><span class="line">    print(element)</span><br><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> page_soup.find(string =<span class="string">'&gt;'</span>).previous_element.previous_siblings:</span><br><span class="line">    print(element)</span><br><span class="line"></span><br><span class="line">next_page_url = page_soup.find(string=<span class="string">'&gt;'</span>).previous_element[<span class="string">'href'</span>]</span><br><span class="line">print(next_page_url)</span><br><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> page_soup.find(id=<span class="string">"pages"</span>).contents:</span><br><span class="line">    print(child)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> page_soup.find(id=<span class="string">"pages"</span>).children:</span><br><span class="line">    print(child)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line">curr = page_soup.find(class_=<span class="string">'curr'</span>)</span><br><span class="line">print(curr)</span><br></pre></td></tr></table></figure>
<ul>
<li>limit 参数</li>
</ul>
<p>find_all() 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 limit 参数限制返回结果的数量.效果与SQL中的limit关键字类似,当搜索到的结果数量达到 limit 的限制时,就停止搜索返回结果.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(page_soup.find_all(<span class="string">'a'</span>,limit=<span class="number">3</span>))</span><br></pre></td></tr></table></figure></p>
<ul>
<li>recursive 参数<br>调用tag的 find_all() 方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 recursive=False .<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(page_soup.find_all(<span class="string">'a'</span>,recursive=<span class="keyword">True</span>))</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下两方法等价</span></span><br><span class="line">print(page_soup.find_all(<span class="string">"a"</span>))</span><br><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line">print(page_soup(<span class="string">"a"</span>))</span><br></pre></td></tr></table></figure>
<h2 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h2><p> Beautiful Soup支持大部分的CSS选择器 <a href="http://www.w3.org/TR/CSS2/selector.html" target="_blank" rel="noopener">http://www.w3.org/TR/CSS2/selector.html</a> [6] , 在 Tag 或 BeautifulSoup 对象的 .select() 方法中传入字符串参数, 即可使用CSS选择器的语法找到tag:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line">print(soup.select(<span class="string">'body a'</span>))</span><br><span class="line">print(page_soup.select(<span class="string">'a'</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li><p>通过tag标签逐层查找:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">'html head title'</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>找到某个tag标签下的直接子标签 [6] :</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">'head &gt; title'</span>))</span><br><span class="line">print(soup.select(<span class="string">'p &gt; a'</span>))</span><br><span class="line">print(soup.select(<span class="string">'p &gt; a:nth-of-type(2)'</span>))</span><br><span class="line">print(soup.select(<span class="string">'p &gt; #link1'</span>))</span><br><span class="line">print(soup.select(<span class="string">'p &gt; a:nth-of-type(3)'</span>))</span><br><span class="line"><span class="comment"># print(soup.select('div &gt; a'))</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>找到兄弟节点标签:</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">'#link1 ~ .sister'</span>))</span><br><span class="line">print(soup.select(<span class="string">'#link1 + .sister'</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li><p>通过CSS的类名查找:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">'.sister'</span>))</span><br><span class="line">print(soup.select(<span class="string">'[class~=sister]'</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过tag的id查找:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line">print(soup.select(<span class="string">'#link1'</span>))</span><br><span class="line">print(soup.select(<span class="string">'a#link2'</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>同时用多种CSS选择器查询元素:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'*********************'</span>)</span><br><span class="line">print(soup.select(<span class="string">'#link1,#link2'</span>))</span><br><span class="line"></span><br><span class="line">print(<span class="string">'*********************'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过是否存在某个属性来查找:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">'a[href]'</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过属性的值来查找:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">'a[href="http://example.com/elsie"]'</span>))</span><br><span class="line">print(soup.select(<span class="string">'a[href^=http://example.com]'</span>))</span><br><span class="line">print(soup.select(<span class="string">'a[href$="tillie"]'</span>))</span><br><span class="line">print(soup.select(<span class="string">'a[href*=".com/el"]'</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>返回查找到的元素的第一个</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select_one(<span class="string">'.sister'</span>))</span><br></pre></td></tr></table></figure>
</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yuanph.org/2016/09/30/bs4学习/" data-title="bs4学习 | 志鹏的技术博客" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/09/30/XML-学习-第一天/" title="XML 学习 第一天">
  <strong>上一篇：</strong><br/>
  <span>
  XML 学习 第一天</span>
</a>
</div>


<div class="next">
<a href="/2016/09/27/安装组件时遇到的一些问题/"  title="安装组件时遇到的一些问题">
 <strong>下一篇：</strong><br/> 
 <span>安装组件时遇到的一些问题
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#使用"><span class="toc-number">1.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#对象的种类"><span class="toc-number">1.1.</span> <span class="toc-text">对象的种类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tag"><span class="toc-number">1.2.</span> <span class="toc-text">Tag</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tag中最重要的属性-name和attributes"><span class="toc-number">1.2.1.</span> <span class="toc-text">tag中最重要的属性: name和attributes</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#name"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">name</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Attributes"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">Attributes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多值属性"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">多值属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#可以遍历的字符串"><span class="toc-number">1.2.2.</span> <span class="toc-text">可以遍历的字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注释及特殊字符串"><span class="toc-number">1.2.3.</span> <span class="toc-text">注释及特殊字符串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#遍历文档树"><span class="toc-number">1.3.</span> <span class="toc-text">遍历文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#子节点"><span class="toc-number">1.3.1.</span> <span class="toc-text">子节点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#contents-和-children"><span class="toc-number">1.4.</span> <span class="toc-text">.contents 和 .children</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#descendants"><span class="toc-number">1.5.</span> <span class="toc-text">.descendants</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strings-和-stripped-strings"><span class="toc-number">1.6.</span> <span class="toc-text">.strings 和 stripped_strings</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#父节点"><span class="toc-number">1.7.</span> <span class="toc-text">父节点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#parent"><span class="toc-number">1.7.1.</span> <span class="toc-text">.parent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parents"><span class="toc-number">1.7.2.</span> <span class="toc-text">.parents</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#兄弟节点"><span class="toc-number">1.7.3.</span> <span class="toc-text">兄弟节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#next-siblings-和-previous-siblings"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">.next_siblings 和 .previous_siblings</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#next-element-和-previous-element"><span class="toc-number">1.7.4.</span> <span class="toc-text">.next_element 和 .previous_element</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#next-elements-和-previous-elements"><span class="toc-number">1.7.5.</span> <span class="toc-text">.next_elements 和 .previous_elements</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#搜索文档树"><span class="toc-number">1.8.</span> <span class="toc-text">搜索文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#find-all"><span class="toc-number">1.8.1.</span> <span class="toc-text">find_all()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CSS选择器"><span class="toc-number">1.9.</span> <span class="toc-text">CSS选择器</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/English/" title="English">English<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/GPUImage/" title="GPUImage">GPUImage<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Git/" title="Git">Git<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/TCP/" title="TCP">TCP<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/XML/" title="XML">XML<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Xcode8/" title="Xcode8">Xcode8<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/cocoapods/" title="cocoapods">cocoapods<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/git/" title="git">git<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>23</sup></a></li>
		  
		
		  
			<li><a href="/categories/python/" title="python">python<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/xcode-archive/" title="xcode_archive">xcode_archive<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/其他/" title="其他">其他<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/工具/" title="工具">工具<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/数学/" title="数学">数学<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/正则表达式/" title="正则表达式">正则表达式<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/测试/" title="测试">测试<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS/" title="iOS">iOS<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/English/" title="English">English<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/XML/" title="XML">XML<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Appache/" title="Appache">Appache<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/动画/" title="动画">动画<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/tips/" title="tips">tips<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/git/" title="git">git<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/UITextField/" title="UITextField">UITextField<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/配置文件/" title="配置文件">配置文件<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ARC/" title="ARC">ARC<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/AutoLayout/" title="AutoLayout">AutoLayout<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/内存问题/" title="内存问题">内存问题<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/CGRect/" title="CGRect">CGRect<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/日期格式/" title="日期格式">日期格式<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ushow/" title="ushow">ushow<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Location/" title="Location">Location<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/GCD/" title="GCD">GCD<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/iOS-GPUImage/" title="iOS-GPUImage">iOS-GPUImage<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/MD5/" title="MD5">MD5<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/NSString/" title="NSString">NSString<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://blog.scorplot.com/" target="_blank" title="蛟哥的博客">蛟哥的博客</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.bomobox.org/" target="_blank" title="贤凯的博客">贤凯的博客</a>
            
          </li>
        
          <li>
            
            	<a href="https://ushareit.github.io/" target="_blank" title="Ushareit">Ushareit</a>
            
          </li>
        
          <li>
            
            	<a href="https://janexzz.github.io" target="_blank" title="许珍珍">许珍珍</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m zhipengbird. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2019
		
		<a href="/about" target="_blank" title="志鹏">志鹏</a>
		
		</br>
		<span id="busuanzi_container_site_pv">
					&nbsp;&nbsp;Total visits:&nbsp;<span id="busuanzi_value_site_pv"></span>
		</span>
		<span id="busuanzi_container_site_uv">
				&nbsp;&nbsp;You are Visiter No.<span id="busuanzi_value_site_uv"></span>
		</span>
	
		
				
		
		</p>
		
		<script type="text/javascript">
(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','VPgYp3Umx_FneUdxKodz','2.0.0');
</script>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
</div>

</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'yuanpinghua';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
